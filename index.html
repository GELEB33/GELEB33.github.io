<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PIG Clicker</title>
  <style>
    body {
      background-image: url('https://i.yapx.ru/YDB8i.jpg');
      background-size: cover;
      color: #fff;
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
    }
    .game-container {
      border: 5px solid #f5a9a9;
      border-radius: 15px;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      max-width: 900px;
      width: 100%; 
      display: inline-block;
      animation: fadeIn 0.5s;
      margin: auto;
    }
    h1 {
      font-size: 48px;
      text-shadow: 2px 2px 0px black;
      border: 4px solid #f5a9a9;
      padding: 10px;
      border-radius: 10px;
    }
    #pig-emoji {
      width: 150px;
      height: 150px;
      background-color: #f5a9a9;
      border-radius: 50%;
      position: relative;
      margin: 20px auto;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      border: 3px solid #a37171; 
      transition: transform 0.1s; 
    }
    .nose-dot {
      position: absolute;
      width: 40px;
      height: 40px;
      background-color: #402828;
      border-radius: 50%;
      border: 5px solid #a37171;
    }
    #nose-dot-left { top: 35%; left: 60%; }
    #nose-dot-right { top: 35%; right: 60%; }
    #balance, #player-name, #pig-per-click {
      font-size: 24px;
      margin: 20px;
      text-shadow: 1px 1px 0px black;
    }
    #fact {
      font-size: 18px;
      margin-bottom: 20px;
      text-shadow: 1px 1px 0px black; 
    }
    button {
      font-size: 18px;
      margin: 10px;
      padding: 10px 20px;
      background-color: #f5a9a9;
      border: 2px solid #a37171;
      border-radius: 5px;
      cursor: pointer;
      color: white;
      transition: background-color 0.3s, transform 0.2s;
      width: calc(100% - 40px);
    }
    button:hover {
      background-color: #e67e22; /* Цвет при наведении */
      transform: scale(1.05);
    }
    button:active {
      background-color: #c76c6c; /* Темный оттенок при нажатии */
      transform: scale(0.95);
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      color: black;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    #farm-window {
      display: none;
      width: 90%; 
      max-width: 900px; 
      background: url('https://i.yapx.ru/YEIk4.jpg') center/cover;
      padding: 20px;
      color: black;
      text-align: center;
      border: 3px solid #a37171;
      border-radius: 10px;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #farm-window h1, 
    #farm-window #pig-count, 
    #farm-timer { /* Установили стиль для таймера */
      color: white; /* Установка белого цвета текста таймера */
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes clickEffect {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); background-color: #c76c6c; } /* Темный оттенок при клике */
      100% { transform: scale(1); background-color: #f5a9a9; }
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 32px;
      }
      #balance, #player-name, #pig-per-click {
        font-size: 18px;
      }
      button {
        font-size: 16px;
      }
      #fact {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <h1>PIG Clicker</h1>
    <div id="player-name">Имя: Не установлено</div>
    <div id="balance">Баланс: 0 pigcoin</div>
    <div id="pig-per-click">За клик: 1 pigcoin</div>
    <div id="fact">Факт: В мире почти два миллиарда свиней!</div>

    <div id="pig-emoji">
      <div id="nose-dot-left" class="nose-dot"></div>
      <div id="nose-dot-right" class="nose-dot"></div>
    </div>

    <button id="name-button">Сменить имя</button>
    <button id="upgrades-button">Улучшения</button>
    <button id="farm-button">Ферма</button>
    <button id="help-button">?</button>

    <div id="modal-overlay"></div>

    <div id="upgrades-modal" class="modal">
      <h1>Улучшения</h1>
      <button id="click-upgrade">Прокачка клика (100 pigcoin)</button>
      <button id="random-pig">Рандомные pigcoin (20000 pigcoin)</button>
      <button id="buy-pig">Купить свинью (500000 pigcoin)</button>
      <button id="close-upgrades">Закрыть</button>
    </div>

    <div id="farm-window">
      <h1>Ваша ферма</h1>
      <div id="pig-count">Количество свиней: 0</div>
      <div id="farm-timer">Ожидание: 0 секунд</div> <!-- Таймер -->
      <button id="buy-pig-from-farm">Купить свинью (500000 pigcoin)</button>
      <button id="close-farm">Закрыть</button>
    </div>

    <div id="congrats-modal" class="modal">
      <h1>Поздравляем!</h1>
      <p>Вы купили 2 миллиарда свиней!</p>
      <button id="close-congrats">Закрыть</button>
    </div>

    <div id="help-modal" class="modal">
      <h1>Система размножения свиней</h1>
      <p>Каждые 2 свиньи могут воспроизводить от 1 до 5 свиней раз в час.</p>
      <button id="close-help">Закрыть</button>
    </div>
  </div>

  <script>
    const pigFacts = [
      "Свиньи очень умные животные и могут быть обучены разным трюкам.",
      "Свиньи могут обонять трюфели под землёй благодаря своему остроумному нюху.",
      "Свиньи — социальные животные и часто живут в группах.",
      "Свиньи могут развивать отношения и дружбу между собой.",
      "Свиньи имеют отличное долговременное зрение и могут видеть цвета.",
      "Одна свинья может нарожать до 32 поросят за раз.",
      "Согласно исследованиям, свиньи могут чувствовать эмоции.",
      "Это правда, что в мире живёт почти 2 миллиарда свиней.",
      "Свиньи могут издавать около 20 различных звуков."
    ];

    let pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
    let pigPerClick = localStorage.getItem('pigPerClick') ? parseInt(localStorage.getItem('pigPerClick')) : 1;
    let playerName = localStorage.getItem('playerName') || "";
    let pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
    let timeUntilNextPig = localStorage.getItem('timeUntilNextPig') ? parseInt(localStorage.getItem('timeUntilNextPig')) : 3600; 
    let pigsToSpawn = Math.floor(Math.random() * 5) + 1; 
    let farmActive = false; 
    let clickUpgradeCost = 100; 

    const balanceDisplay = document.getElementById("balance");
    const pigEmoji = document.getElementById("pig-emoji");
    const playerNameDisplay = document.getElementById("player-name");
    const pigPerClickDisplay = document.getElementById("pig-per-click");
    const pigCountDisplay = document.getElementById("pig-count");
    const factDisplay = document.getElementById("fact");
    const upgradesModal = document.getElementById("upgrades-modal");
    const farmWindow = document.getElementById("farm-window");
    const helpModal = document.getElementById("help-modal");
    const congratsModal = document.getElementById("congrats-modal");
    const farmTimerDisplay = document.getElementById("farm-timer");

    function updateBalance() {
      balanceDisplay.textContent = `Баланс: ${pigBalance} pigcoin`;
      localStorage.setItem('pigBalance', pigBalance);
      if (pigCount >= 2000000000) {
        showCongratsModal(); 
      }
    }

    function updatePlayerNameDisplay() {
      playerNameDisplay.textContent = `Имя: ${playerName || "Не установлено"}`;
      localStorage.setItem('playerName', playerName);
    }

    function updatePigPerClick() {
      pigPerClickDisplay.textContent = `За клик: ${pigPerClick} pigcoin`;
    }

    function updateFarmDisplay() {
      pigCountDisplay.textContent = `Количество свиней: ${pigCount}`;
      localStorage.setItem('pigCount', pigCount);
      if (pigCount >= 2 && !farmActive) {
        farmActive = true; 
        startFarmTimer(); 
      }
    }

    function startFarmTimer() {
      pigsToSpawn = Math.floor(Math.random() * 5) + 1; 
      updateFarmTimer();
    }

    function updateFarmTimer() {
      if (timeUntilNextPig > 0) {
        timeUntilNextPig--;
        farmTimerDisplay.textContent = `Ожидание: ${Math.floor(timeUntilNextPig / 60)} минут ${timeUntilNextPig % 60} секунд`;
        localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      } else {
        pigCount += pigsToSpawn;
        pigBalance += pigsToSpawn * 100; 
        updateFarmDisplay();
        updateBalance();
        timeUntilNextPig = 3600; 
      }
    }

    setInterval(earnPigCoinFromPigs, 1000);

    function earnPigCoinFromPigs() {
      if (pigCount > 0) {
        pigBalance += pigCount * 100; 
        updateBalance();
      }
      if (farmActive) {
        updateFarmTimer(); 
      }
    }

    let lastClickTime = 0;
    let clickCount = 0;

    pigEmoji.addEventListener('click', () => {
      const currentTime = new Date().getTime();
      if (currentTime - lastClickTime < 300) { 
        clickCount++;
        if (clickCount >= 5) {
          pigEmoji.style.animation = "clickEffect 0.5s forwards"; 
          clickCount = 0; 
        }
      } else {
        clickCount = 1; 
      }
      lastClickTime = currentTime;
      animatePig(); 
      pigBalance += pigPerClick; 
      updateBalance();
      const randomFact = pigFacts[Math.floor(Math.random() * pigFacts.length)];
      factDisplay.textContent = randomFact;
    });

    pigEmoji.addEventListener('touchstart', (event) => {
      event.preventDefault();
      const currentTime = new Date().getTime();
      if (currentTime - lastClickTime < 300) { 
        clickCount++;
        if (clickCount >= 5) {
          pigEmoji.style.animation = "clickEffect 0.5s forwards"; 
          clickCount = 0; 
        }
      } else {
        clickCount = 1; 
      }
      lastClickTime = currentTime;
      animatePig(); 
      const fingerCount = event.touches.length;
      const earnedCoins = pigPerClick * Math.min(fingerCount, 5);
      pigBalance += earnedCoins;
      updateBalance();
      const randomFact = pigFacts[Math.floor(Math.random() * pigFacts.length)];
      factDisplay.textContent = randomFact;
    });

    document.getElementById("click-upgrade").onclick = () => {
      if (pigBalance >= clickUpgradeCost) { 
        pigBalance -= clickUpgradeCost; 
        pigPerClick += 1; 
        updateBalance();
        updatePigPerClick(); 
        clickUpgradeCost = Math.floor(clickUpgradeCost * 1.5); 
        document.getElementById("click-upgrade").textContent = `Прокачка клика (${clickUpgradeCost} pigcoin)`; 
      } else {
        alert("Недостаточно pigcoin для прокачки!");
      }
    };

    document.getElementById("random-pig").onclick = () => {
      if (pigBalance >= 20000) {
        const randomAmount = Math.floor(Math.random() * 50000) + 1;
        pigBalance += randomAmount;
        updateBalance();
      } else {
        alert("Недостаточно pigcoin для получения рандомных pigcoin!");
      }
    };

    document.getElementById("buy-pig").onclick = () => {
      if (pigBalance >= 500000) { 
        pigBalance -= 500000;
        pigCount += 1; 
        updateFarmDisplay();
        updateBalance();
      } else {
        alert("Недостаточно pigcoin для покупки свиньи!");
      }
    };

    document.getElementById("farm-button").onclick = () => {
      farmWindow.style.display = "block";
      farmWindow.style.opacity = 1;
      updateFarmDisplay();
    };

    document.getElementById("close-farm").onclick = () => {
      farmWindow.style.opacity = 0; 
      setTimeout(() => {
        farmWindow.style.display = "none"; 
      }, 500);
    };

    document.getElementById("buy-pig-from-farm").onclick = () => {
      if (pigBalance >= 500000) { 
        pigBalance -= 500000;
        pigCount += 1;
        updateFarmDisplay();
        updateBalance();
      } else {
        alert("Недостаточно pigcoin для покупки свиньи!");
      }
    };

    document.getElementById("name-button").onclick = () => {
      const newName = prompt("Введите ваше имя:");
      if (newName) {
        playerName = newName;
        updatePlayerNameDisplay();
      }
    };

    document.getElementById("upgrades-button").onclick = () => {
      upgradesModal.style.display = "block";
      upgradesModal.style.opacity = 1; 
    };

    document.getElementById("close-upgrades").onclick = () => {
      upgradesModal.style.opacity = 0; 
      setTimeout(() => {
        upgradesModal.style.display = "none"; 
      }, 500);
    };

    document.getElementById("help-button").onclick = () => {
      helpModal.style.display = "block";
      helpModal.style.opacity = 1; 
    };

    document.getElementById("close-help").onclick = () => {
      helpModal.style.opacity = 0; 
      setTimeout(() => {
        helpModal.style.display = "none"; 
      }, 500);
    };

    document.getElementById("close-congrats").onclick = () => {
      congratsModal.style.opacity = 0; 
      setTimeout(() => {
        congratsModal.style.display = "none"; 
      }, 500);
    };

    window.onload = () => {
      playerName = localStorage.getItem('playerName') || prompt("Введите ваше имя:") || "Не установлено";
      updatePlayerNameDisplay();
      updateFarmDisplay();
      updatePigPerClick(); 
    };

    window.onbeforeunload = () => {
      localStorage.setItem('pigBalance', pigBalance);
      localStorage.setItem('pigCount', pigCount);
      localStorage.setItem('pigPerClick', pigPerClick);
      localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      localStorage.setItem('playerName', playerName);
    };

    function animatePig() {
      pigEmoji.style.animation = 'clickEffect 0.2s forwards'; 
      setTimeout(() => {
        pigEmoji.style.animation = ''; 
      }, 200);
    }
  
    function showCongratsModal() {
      congratsModal.style.display = "block";
      congratsModal.style.opacity = 1; 
    }
  </script>
</body>
</html>
