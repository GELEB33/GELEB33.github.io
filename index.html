<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PIG Clicker - –ú–∏–ª–∞—è —Å–≤–∏–Ω–æ—Ñ–µ—Ä–º–∞</title>
  
  <style>
    :root {
      --primary-pink: #FFB6C1;
      --secondary-pink: #FFC0CB;
      --dark-pink: #D87093;
      --light-pink: #FFE4E9;
      --pig-nose: #F8A5C2;
      --grass-green: #7CFC00;
      --sky-blue: #87CEEB;
      --barn-red: #8B4513;
      --coin-gold: #FFD700;
    }

    body {
      background: linear-gradient(135deg, var(--sky-blue) 0%, #98FB98 100%);
      color: #333;
      font-family: 'Comic Neue', 'Arial Rounded MT Bold', 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .game-container {
      border: 8px solid var(--primary-pink);
      border-radius: 25px;
      padding: 25px;
      background: linear-gradient(145deg, #ffffff 0%, var(--light-pink) 100%);
      max-width: 1000px;
      width: 90%;
      display: inline-block;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      margin: auto;
      margin-top: 20px;
    }

    .game-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      background: repeating-linear-gradient(
        90deg,
        var(--primary-pink),
        var(--primary-pink) 20px,
        var(--secondary-pink) 20px,
        var(--secondary-pink) 40px
      );
      border-radius: 25px 25px 0 0;
    }

    .header {
      margin-bottom: 25px;
      position: relative;
    }

    h1 {
      font-size: 52px;
      color: var(--dark-pink);
      text-shadow: 3px 3px 0px rgba(255, 182, 193, 0.3);
      margin: 0 0 15px 0;
      padding: 15px 30px;
      background-color: white;
      border-radius: 20px;
      display: inline-block;
      border: 5px solid var(--primary-pink);
      box-shadow: 0 8px 0 rgba(216, 112, 147, 0.2);
      letter-spacing: 1px;
    }

    .stats-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-box {
      background: white;
      padding: 15px 25px;
      border-radius: 15px;
      border: 4px solid var(--primary-pink);
      font-size: 22px;
      font-weight: bold;
      color: var(--dark-pink);
      box-shadow: 0 6px 0 rgba(216, 112, 147, 0.2);
      min-width: 200px;
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    .stat-box::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: linear-gradient(90deg, var(--primary-pink), var(--secondary-pink));
    }

    .pig-container {
      position: relative;
      margin: 30px auto;
      width: 220px;
      height: 220px;
      cursor: pointer;
    }

    .pig-body {
      width: 200px;
      height: 180px;
      background: linear-gradient(145deg, #FFC0CB, #FFB6C1);
      border-radius: 50% 50% 45% 45%;
      position: relative;
      margin: 0 auto;
      box-shadow: 
        inset 0 -15px 20px rgba(0,0,0,0.1),
        0 10px 25px rgba(0,0,0,0.15);
      transition: transform 0.1s;
    }

    .pig-body:hover {
      transform: scale(1.05);
    }

    .pig-ear {
      position: absolute;
      width: 60px;
      height: 50px;
      background: #FFB6C1;
      border-radius: 50%;
      top: -15px;
    }

    .pig-ear.left {
      left: 25px;
      transform: rotate(-15deg);
    }

    .pig-ear.right {
      right: 25px;
      transform: rotate(15deg);
    }

    .pig-ear-inner {
      position: absolute;
      width: 40px;
      height: 30px;
      background: #FF8BA7;
      border-radius: 50%;
      top: 10px;
      left: 10px;
    }

    .pig-eye {
      position: absolute;
      width: 25px;
      height: 25px;
      background: white;
      border-radius: 50%;
      top: 60px;
      border: 3px solid #333;
      overflow: hidden;
    }

    .pig-eye.left {
      left: 55px;
    }

    .pig-eye.right {
      right: 55px;
    }

    .pig-eye::after {
      content: "";
      position: absolute;
      width: 12px;
      height: 12px;
      background: #333;
      border-radius: 50%;
      top: 5px;
      left: 5px;
    }

    .pig-nose {
      position: absolute;
      width: 80px;
      height: 50px;
      background: var(--pig-nose);
      border-radius: 50%;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      border: 4px solid #D87093;
      box-shadow: inset 0 5px 10px rgba(0,0,0,0.1);
    }

    .nose-hole {
      position: absolute;
      width: 18px;
      height: 18px;
      background: #8B5A5A;
      border-radius: 50%;
      top: 16px;
    }

    .nose-hole.left {
      left: 18px;
    }

    .nose-hole.right {
      right: 18px;
    }

    .pig-mouth {
      position: absolute;
      width: 40px;
      height: 15px;
      background: transparent;
      border-bottom: 4px solid #D87093;
      border-radius: 0 0 50% 50%;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .buttons-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .game-button {
      font-size: 20px;
      padding: 15px 20px;
      background: linear-gradient(to bottom, var(--primary-pink), var(--dark-pink));
      border: none;
      border-radius: 15px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      transition: all 0.2s;
      box-shadow: 0 8px 0 #A64D79;
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }

    .game-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 11px 0 #A64D79;
    }

    .game-button:active {
      transform: translateY(4px);
      box-shadow: 0 4px 0 #A64D79;
    }

    .game-button::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .game-button:hover::after {
      left: 100%;
    }

    .fact-box {
      background: white;
      padding: 20px;
      border-radius: 15px;
      border: 4px dashed var(--primary-pink);
      margin: 25px 0;
      font-size: 20px;
      color: #555;
      font-style: italic;
      position: relative;
    }

    .fact-box::before {
      content: "üí°";
      position: absolute;
      left: 15px;
      top: 15px;
      font-size: 24px;
    }

    .warning {
      color: #FF4500;
      font-weight: bold;
      font-size: 18px;
      margin-top: 20px;
      text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: opacity 0.5s ease;
      max-width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
      background: linear-gradient(135deg, #ffffff 0%, #FFE4E9 100%);
      border: 8px solid var(--primary-pink);
      color: #333;
    }

    .modal h1 {
      font-size: 36px;
      margin-bottom: 25px;
      color: var(--dark-pink);
    }

    .modal-content {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    #farm-window {
      display: none;
      background: linear-gradient(135deg, #E0FFFF 0%, #98FB98 100%);
      padding: 25px;
      color: #333;
      margin-top: 20px;
      border-radius: 20px;
      border: 8px solid #8B4513;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
    }

    #farm-window h1 {
      color: #8B4513;
      border-color: #8B4513;
    }

    .pig-count-display {
      font-size: 28px;
      color: var(--dark-pink);
      font-weight: bold;
      margin: 10px 0;
      text-shadow: 1px 1px 0px white;
    }

    .coin-animation {
      position: absolute;
      font-size: 24px;
      color: var(--coin-gold);
      font-weight: bold;
      pointer-events: none;
      animation: coinFloat 1s forwards;
      text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
    }

    @keyframes coinFloat {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) scale(0.5);
        opacity: 0;
      }
    }

    @keyframes pigClick {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .pig-click-animation {
      animation: pigClick 0.2s;
    }

    .grass-decoration {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: linear-gradient(to top, var(--grass-green), #32CD32);
      border-radius: 0 0 15px 15px;
      z-index: 1;
    }

    .grass-blade {
      position: absolute;
      bottom: 40px;
      width: 5px;
      height: 20px;
      background: var(--grass-green);
      border-radius: 5px 5px 0 0;
    }

    .grass-blade:nth-child(odd) {
      transform: rotate(-15deg);
    }

    .grass-blade:nth-child(even) {
      transform: rotate(15deg);
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 36px;
      }
      
      .stat-box {
        font-size: 18px;
        min-width: 150px;
        padding: 12px 15px;
      }
      
      .game-button {
        font-size: 18px;
        padding: 12px 15px;
      }
      
      .pig-container {
        width: 180px;
        height: 180px;
      }
      
      .pig-body {
        width: 160px;
        height: 140px;
      }
    }

    @media (max-width: 480px) {
      .game-container {
        padding: 15px;
      }
      
      h1 {
        font-size: 28px;
        padding: 10px 15px;
      }
      
      .buttons-container {
        grid-template-columns: 1fr;
      }
    }

    .floating-pig {
      position: absolute;
      font-size: 30px;
      pointer-events: none;
      animation: floatAround 20s infinite linear;
      z-index: -1;
      opacity: 0.3;
    }

    @keyframes floatAround {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(100px, 50px) rotate(90deg); }
      50% { transform: translate(50px, 100px) rotate(180deg); }
      75% { transform: translate(-50px, 50px) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }
  </style>
  
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- –ü–ª–∞–≤–∞—é—â–∏–µ —Å–≤–∏–Ω–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ -->
  <div class="floating-pig" style="top: 10%; left: 5%;">üê∑</div>
  <div class="floating-pig" style="top: 20%; right: 10%;">üêñ</div>
  <div class="floating-pig" style="bottom: 15%; left: 15%;">üêΩ</div>
  <div class="floating-pig" style="bottom: 25%; right: 5%;">üê∑</div>
  
  <div class="game-container">
    <div class="grass-decoration"></div>
    
    <div class="header">
      <h1>üê∑ PIG Clicker üê∑</h1>
    </div>
    
    <div class="stats-container">
      <div class="stat-box">
        <div>üë§ –ò–º—è: <span id="player-name">–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</span></div>
      </div>
      <div class="stat-box">
        <div>üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> pigcoin</div>
      </div>
      <div class="stat-box">
        <div>üëÜ –ó–∞ –∫–ª–∏–∫: <span id="pig-per-click">1</span> pigcoin</div>
      </div>
      <div class="stat-box">
        <div>‚è±Ô∏è –í—Ä–µ–º—è –≤ –∏–≥—Ä–µ: <span id="play-time">0:00</span></div>
      </div>
    </div>
    
    <div class="fact-box">
      <div id="fact">–§–∞–∫—Ç: –í –º–∏—Ä–µ –ø–æ—á—Ç–∏ –¥–≤–∞ –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π!</div>
    </div>
    
    <div class="pig-container">
      <div class="pig-body" id="pig-emoji">
        <div class="pig-ear left">
          <div class="pig-ear-inner"></div>
        </div>
        <div class="pig-ear right">
          <div class="pig-ear-inner"></div>
        </div>
        <div class="pig-eye left"></div>
        <div class="pig-eye right"></div>
        <div class="pig-nose">
          <div class="nose-hole left"></div>
          <div class="nose-hole right"></div>
        </div>
        <div class="pig-mouth"></div>
      </div>
      <div style="margin-top: 15px; font-weight: bold; color: var(--dark-pink);">–ö–ª–∏–∫–Ω–∏ –Ω–∞ —Å–≤–∏–Ω–∫—É!</div>
    </div>
    
    <div class="buttons-container">
      <button class="game-button" id="upgrades-button">–£–ª—É—á—à–µ–Ω–∏—è</button>
      <button class="game-button" id="farm-button">–§–µ—Ä–º–∞</button>
      <button class="game-button" id="shop-button">–ú–∞–≥–∞–∑–∏–Ω</button>
      <button class="game-button" id="help-button">–ü–æ–º–æ—â—å</button>
      <button class="game-button" id="lottery-button">–°–≤–∏–Ω–Ω–∞—è –ª–æ—Ç–µ—Ä–µ—è</button>
      <button class="game-button" id="competitor-button" style="display: none;">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç</button>
    </div>
    
    <div class="warning">
      *–®–∞–Ω—Å 1% –ø–æ—Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å –∫–ª–∏–∫–æ–≤ –∏ —Å–≤–∏–Ω–µ–π, –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ!
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="upgrades-modal" class="modal">
      <h1>üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è</h1>
      <div class="modal-content">
        <button class="game-button" id="click-upgrade">–ü—Ä–æ–∫–∞—á–∫–∞ –∫–ª–∏–∫–∞ (100 pigcoin)</button>
        <button class="game-button" id="barn-upgrade">–£–ª—É—á—à–µ–Ω–∏–µ –∞–º–±–∞—Ä–∞ (+1 –∫–ª–∏–∫, <span id="barn-upgrade-cost">5000</span> pigcoin)</button>
        <button class="game-button" id="enhance-territory">–û–±–ª–∞–≥–æ—Ä–æ–¥–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (5000 pigcoin)</button>
        <button class="game-button" id="close-upgrades">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    
    <div id="farm-window">
      <h1>üè° –í–∞—à–∞ —Ñ–µ—Ä–º–∞</h1>
      <div class="pig-count-display" id="pig-count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–∏–Ω–µ–π: 0</div>
      <div class="pig-count-display" id="manure-counter">–ù–∞–≤–æ–∑: 0</div>
      <div class="pig-count-display" id="farm-timer">–û–∂–∏–¥–∞–Ω–∏–µ: 0 —Å–µ–∫—É–Ω–¥</div>
      <div class="buttons-container">
        <button class="game-button" id="buy-pig-from-farm">–ö—É–ø–∏—Ç—å —Å–≤–∏–Ω—å—é (500000 pigcoin)</button>
        <button class="game-button" id="buy-carrot">–ö—É–ø–∏—Ç—å –º–æ—Ä–∫–æ–≤—å (50000 pigcoin)</button>
        <button class="game-button" id="clean-manure">–û—á–∏—Å—Ç–∏—Ç—å –Ω–∞–≤–æ–∑ (10 –∑–∞ –∫–ª–∏–∫)</button>
        <button class="game-button" id="use-shovel">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–ø–∞—Ç—É</button>
        <button class="game-button" id="manure-help-button">–ó–∞—á–µ–º —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑?</button>
        <button class="game-button" id="close-farm">–ó–∞–∫—Ä—ã—Ç—å —Ñ–µ—Ä–º—É</button>
      </div>
    </div>
    
    <div id="shop-modal" class="modal">
      <h1>üõí –ú–∞–≥–∞–∑–∏–Ω</h1>
      <div class="modal-content">
        <button class="game-button" id="buy-shovel1">–õ–æ–ø–∞—Ç–∞ 1 (–æ—á–∏—Å—Ç–∫–∞ 1000 –Ω–∞–≤–æ–∑–∞, 10000 pigcoin)</button>
        <button class="game-button" id="buy-shovel2">–õ–æ–ø–∞—Ç–∞ 2 (–æ—á–∏—Å—Ç–∫–∞ 10000 –Ω–∞–≤–æ–∑–∞, 100000 pigcoin)</button>
        <button class="game-button" id="buy-shovel3">–õ–æ–ø–∞—Ç–∞ 3 (–æ—á–∏—Å—Ç–∫–∞ 100000 –Ω–∞–≤–æ–∑–∞, 500000 pigcoin)</button>
        <button class="game-button" id="close-shop">–ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>
      </div>
    </div>
    
    <div id="congrats-modal" class="modal">
      <h1>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h1>
      <div class="modal-content">
        <p style="font-size: 24px;">–í—ã –∫—É–ø–∏–ª–∏ 2 –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π! üê∑üèÜ</p>
        <button class="game-button" id="close-congrats">–£—Ä–∞!</button>
      </div>
    </div>
    
    <div id="help-modal" class="modal">
      <h1>‚ùì –¶–µ–ª—å –∏–≥—Ä—ã</h1>
      <div class="modal-content">
        <p style="text-align: left; font-size: 20px;">–°—Ç–∞—Ç—å —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π —Å–≤–∏–Ω–æ–π —Ñ–µ—Ä–º–æ–π –∏ –æ–±–∑–∞–≤–µ—Å—Ç–∏—Å—å —Å–∞–º—ã–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–¥–æ—Ä–æ–≤—ã—Ö —Å–≤–∏–Ω–µ–π!</p>
        <p style="text-align: left; font-size: 20px;">–ü–æ–ª—É—á–∞–π —Å–≤–∏–Ω–Ω—ã–µ –∫–æ–π–Ω—ã –∏ —Ç—Ä–∞—Ç—å –∏—Ö –Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è –∏–ª–∏ –ø–æ–∫—É–ø–∫—É –Ω–æ–≤—ã—Ö —Å–≤–∏–Ω–æ–∫, –æ–Ω–∏ —É–∂–µ –∂–¥—É—Ç, –∫–æ–≥–¥–∞ —Ç—ã –∏—Ö –∫—É–ø–∏—à—å!</p>
        <button class="game-button" id="close-help">–ü–æ–Ω—è—Ç–Ω–æ!</button>
      </div>
    </div>
    
    <div id="manure-help-modal" class="modal">
      <h1>üßπ –ü–æ—á–µ–º—É –Ω—É–∂–Ω–æ —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑?</h1>
      <div class="modal-content">
        <p style="text-align: left; font-size: 20px;">–ù–∞–≤–æ–∑ –º–æ–∂–µ—Ç –∑–∞—Å–æ—Ä—è—Ç—å –≤–∞—à—É —Ñ–µ—Ä–º—É –∏ —Å–Ω–∏–∂–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–≤–∏–Ω–µ–π. –ö–∞–∂–¥—ã–π –Ω–∞–≤–æ–∑ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å –≤–∞—à–∏—Ö pigcoin!</p>
        <p style="text-align: left; font-size: 20px;">–õ–æ–ø–∞—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ —Ñ–µ—Ä–º–µ!</p>
        <button class="game-button" id="close-manure-help">–ü–æ–Ω—è—Ç–Ω–æ!</button>
      </div>
    </div>
  </div>

  <script>
    // –í–µ—Å—å JavaScript –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ, –∫–∞–∫ –≤ –≤–∞—à–µ–º –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
    // –Ø –Ω–µ –º–µ–Ω—è–ª –ª–æ–≥–∏–∫—É –∏–≥—Ä—ã, —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–∏–ª –≤–∏–∑—É–∞–ª
    const pigFacts = [
      "–°–≤–∏–Ω—å–∏ –æ—á–µ–Ω—å —É–º–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—É—á–µ–Ω—ã —Ä–∞–∑–Ω—ã–º —Ç—Ä—é–∫–∞–º.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç –æ–±–æ–Ω—è—Ç—å —Ç—Ä—é—Ñ–µ–ª–∏ –ø–æ–¥ –∑–µ–º–ª—ë–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤–æ–µ–º—É –æ—Å—Ç—Ä–æ—É–º–Ω–æ–º—É –Ω—é—Ö—É.",
      "–°–≤–∏–Ω—å–∏ ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏ —á–∞—Å—Ç–æ –∂–∏–≤—É—Ç –≤ –≥—Ä—É–ø–ø–∞—Ö.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ –¥—Ä—É–∂–±—É –º–µ–∂–¥—É —Å–æ–±–æ–π.",
      "–°–≤–∏–Ω—å–∏ –∏–º–µ—é—Ç –æ—Ç–ª–∏—á–Ω–æ–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ü–≤–µ—Ç–∞.",
      "–û–¥–Ω–∞ —Å–≤–∏–Ω—å—è –º–æ–∂–µ—Ç –Ω–∞—Ä–æ–∂–∞—Ç—å –¥–æ 32 –ø–æ—Ä–æ—Å—è—Ç –∑–∞ —Ä–∞–∑.",
      "–°–æ–≥–ª–∞—Å–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º, —Å–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏.",
      "–≠—Ç–æ –ø—Ä–∞–≤–¥–∞, —á—Ç–æ –≤ –º–∏—Ä–µ –∂–∏–≤—ë—Ç –ø–æ—á—Ç–∏ 2 –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç –∏–∑–¥–∞–≤–∞—Ç—å –æ–∫–æ–ª–æ 20 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–≤—É–∫–æ–≤."
    ];

    let pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
    let pigPerClick = localStorage.getItem('pigPerClick') ? parseInt(localStorage.getItem('pigPerClick')) : 1;
    let playerName = localStorage.getItem('playerName') || "–ò–≥—Ä–æ–∫";
    let pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
    let timeUntilNextPig = localStorage.getItem('timeUntilNextPig') ? parseInt(localStorage.getItem('timeUntilNextPig')) : 3600;
    let pigsToSpawn = Math.floor(Math.random() * 5) + 1;
    let farmActive = false;
    let clickUpgradeCost = localStorage.getItem('clickUpgradeCost') ? parseInt(localStorage.getItem('clickUpgradeCost')) : 100;
    let barnUpgradeCost = localStorage.getItem('barnUpgradeCost') ? parseInt(localStorage.getItem('barnUpgradeCost')) : 5000;
    let territoryUpgradeCost = localStorage.getItem('territoryUpgradeCost') ? parseInt(localStorage.getItem('territoryUpgradeCost')) : 5000;
    let manureCount = localStorage.getItem('manureCount') ? parseInt(localStorage.getItem('manureCount')) : 0;
    let shovels = {
      shovel1: localStorage.getItem('shovel1') ? parseInt(localStorage.getItem('shovel1')) : 0,
      shovel2: localStorage.getItem('shovel2') ? parseInt(localStorage.getItem('shovel2')) : 0,
      shovel3: localStorage.getItem('shovel3') ? parseInt(localStorage.getItem('shovel3')) : 0
    };

    let totalPlayTime = localStorage.getItem('totalPlayTime') ? parseInt(localStorage.getItem('totalPlayTime')) : 0;
    let johnsonPigCount = localStorage.getItem('johnsonPigCount') ? parseInt(localStorage.getItem('johnsonPigCount')) : 15000;
    let johnsonFarmActive = false;
    let johnsonTimer;
    let johnsonShown = localStorage.getItem('johnsonShown') ? JSON.parse(localStorage.getItem('johnsonShown')) : false;
    let competitorButtonVisible = localStorage.getItem('competitorButtonVisible') ? JSON.parse(localStorage.getItem('competitorButtonVisible')) : false;

    const balanceDisplay = document.getElementById("balance");
    const pigEmoji = document.getElementById("pig-emoji");
    const playerNameDisplay = document.getElementById("player-name");
    const pigPerClickDisplay = document.getElementById("pig-per-click");
    const pigCountDisplay = document.getElementById("pig-count");
    const manureCounterDisplay = document.getElementById("manure-counter");
    const playTimeDisplay = document.getElementById("play-time");
    const factDisplay = document.getElementById("fact");
    const upgradesModal = document.getElementById("upgrades-modal");
    const farmWindow = document.getElementById("farm-window");
    const shopModal = document.getElementById("shop-modal");
    const helpModal = document.getElementById("help-modal");
    const manureHelpModal = document.getElementById("manure-help-modal");
    const congratsModal = document.getElementById("congrats-modal");
    const farmTimerDisplay = document.getElementById("farm-timer");
    const competitorButton = document.getElementById("competitor-button");

    if (competitorButtonVisible) {
      competitorButton.style.display = "block";
    }

    function updateBalance() {
      balanceDisplay.textContent = pigBalance;
      localStorage.setItem('pigBalance', pigBalance);
      localStorage.setItem('clickUpgradeCost', clickUpgradeCost);
      localStorage.setItem('barnUpgradeCost', barnUpgradeCost);
      localStorage.setItem('territoryUpgradeCost', territoryUpgradeCost);
      updateUpgradeButton();
      
      if (pigCount >= 2000000000) {
        showCongratsModal();
      }
    }

    function updatePlayTime() {
      const minutes = Math.floor(totalPlayTime / 60);
      const seconds = totalPlayTime % 60;
      playTimeDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      localStorage.setItem('totalPlayTime', totalPlayTime);
    }

    function updateUpgradeButton() {
      document.getElementById("click-upgrade").textContent = `–ü—Ä–æ–∫–∞—á–∫–∞ –∫–ª–∏–∫–∞ (${clickUpgradeCost} pigcoin)`;
      document.getElementById("barn-upgrade").textContent = `–£–ª—É—á—à–µ–Ω–∏–µ –∞–º–±–∞—Ä–∞ (+1 –∫–ª–∏–∫, ${barnUpgradeCost} pigcoin)`;
      document.getElementById("enhance-territory").textContent = `–û–±–ª–∞–≥–æ—Ä–æ–¥–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (${territoryUpgradeCost} pigcoin)`;
    }

    function updatePlayerNameDisplay() {
      playerNameDisplay.textContent = playerName;
      localStorage.setItem('playerName', playerName);
    }

    function updatePigPerClick() {
      pigPerClickDisplay.textContent = pigPerClick;
      localStorage.setItem('pigPerClick', pigPerClick);
    }

    function updateFarmDisplay() {
      pigCountDisplay.textContent = `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–∏–Ω–µ–π: ${pigCount}`;
      manureCounterDisplay.textContent = `–ù–∞–≤–æ–∑: ${manureCount}`;
      localStorage.setItem('pigCount', pigCount);
      localStorage.setItem('manureCount', manureCount);
      if (pigCount >= 2 && !farmActive) {
        farmActive = true;
        startFarmTimer();
      }
    }

    function startFarmTimer() {
      pigsToSpawn = Math.floor(Math.random() * 5) + 1;
      updateFarmTimer();
      setInterval(() => {
        manureCount += pigCount;
        updateFarmDisplay();
      }, 5000);
    }

    function updateFarmTimer() {
      if (timeUntilNextPig > 0) {
        timeUntilNextPig--;
        farmTimerDisplay.textContent = `–û–∂–∏–¥–∞–Ω–∏–µ: ${Math.floor(timeUntilNextPig / 60)} –º–∏–Ω—É—Ç ${timeUntilNextPig % 60} —Å–µ–∫—É–Ω–¥`;
        localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      } else {
        pigCount += pigsToSpawn;
        pigBalance += pigsToSpawn * 100;
        updateFarmDisplay();
        updateBalance();
        timeUntilNextPig = 3600;
      }
    }

    setInterval(() => {
      earnPigCoinFromPigs();
      totalPlayTime++;
      updatePlayTime();

      if (totalPlayTime >= 1200 && !johnsonShown) {
        showJohnsonArrival();
      }
    }, 1000);

    function earnPigCoinFromPigs() {
      if (pigCount > 0) {
        pigBalance += pigCount * 100;
        updateBalance();
        
        if (manureCount > 0) {
          pigBalance -= manureCount;
          updateBalance();
        }
      }
      if (farmActive) {
        updateFarmTimer();
      }
    }

    function handlePigClick(event) {
      // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
      pigEmoji.classList.add('pig-click-animation');
      setTimeout(() => {
        pigEmoji.classList.remove('pig-click-animation');
      }, 200);
      
      // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –º–æ–Ω–µ—Ç–∫–∏
      const coin = document.createElement('div');
      coin.className = 'coin-animation';
      coin.textContent = `+${pigPerClick}`;
      coin.style.left = `${event.clientX - 30}px`;
      coin.style.top = `${event.clientY - 30}px`;
      document.body.appendChild(coin);
      
      setTimeout(() => {
        document.body.removeChild(coin);
      }, 1000);
      
      pigBalance += pigPerClick;
      updateBalance();
      const randomFact = pigFacts[Math.floor(Math.random() * pigFacts.length)];
      factDisplay.textContent = randomFact;
    }

    pigEmoji.addEventListener('click', handlePigClick);
    pigEmoji.addEventListener('touchstart', (event) => {
      event.preventDefault();
      handlePigClick(event);
    });

    document.getElementById("lottery-button").onclick = () => {
      if (pigBalance >= 20000) {
        pigBalance -= 20000;
        updateBalance();

        const randomNum = Math.random();
        let earnedCoins = 0;

        if (randomNum < 0.35) {
          earnedCoins = 5000;
        } else if (randomNum < 0.60) {
          earnedCoins = 10000;
        } else if (randomNum < 0.80) {
          earnedCoins = 25000;
        } else if (randomNum < 0.90) {
          earnedCoins = 50000;
        } else if (randomNum < 0.95) {
          earnedCoins = 150000;
        } else if (randomNum < 0.98) {
          earnedCoins = 1000000;
        } else if (randomNum < 0.985) {
          earnedCoins = 10000000;
        } else {
          alert("–ü–∞–Ω–¥–µ–º–∏—è! –£ –≤–∞—Å —Å–ø–∏—Å–∞–Ω–æ 10 –∫–ª–∏–∫–æ–≤ –∏ 2 —Å–≤–∏–Ω—å–∏.");
          pigPerClick = Math.max(pigPerClick - 10, 0);
          pigCount = Math.max(pigCount - 2, 0);
        }

        pigBalance += earnedCoins;
        updateBalance();
        if (earnedCoins > 0) {
          alert(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ ${earnedCoins} pigcoin!`);
        }
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —Å–≤–∏–Ω–æ–π –ª–æ—Ç–µ—Ä–µ–∏!");
      }
    };

    function showJohnsonArrival() {
      if (!johnsonShown) {
        alert("–û –Ω–µ—Ç, –ø–æ—Ö–æ–∂–µ, –º–∏—Å—Ç–µ—Ä –î–∂–æ–Ω—Å–æ–Ω –≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ —Å–≤–æ—é —Ñ–µ—Ä–º—É –∏ —Ö–æ—á–µ—Ç –ø–æ–º–µ—à–∞—Ç—å –º–Ω–µ —Å—Ç–∞—Ç—å —Å–∞–º—ã–º –∫—Ä—É–ø–Ω—ã–º —Å–≤–∏–Ω—ã–º —Ñ–µ—Ä–º–µ—Ä–æ–º!! –ù–∞–¥–æ –µ–≥–æ –æ–±–æ–≥–Ω–∞—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç—å, –∫—Ç–æ –∑–¥–µ—Å—å –ø–∞–ø–∞ —Å–≤–∏–Ω!");
        johnsonShown = true;
        localStorage.setItem('johnsonShown', true);
        competitorButtonVisible = true;
        localStorage.setItem('competitorButtonVisible', true);
        competitorButton.style.display = "block";
      }
    }

    competitorButton.onclick = () => {
      johnsonFarmActive = true;
      johnsonTimer = setInterval(updateJohnsonPigCount, 2000);
      alert("–§–µ—Ä–º–∞ –º–∏—Å—Ç–µ—Ä–∞ –î–∂–æ–Ω—Å–æ–Ω–∞: –°–≤–∏–Ω–µ–π - " + johnsonPigCount);
      checkJohnsonStatus();
    }

    function updateJohnsonPigCount() {
      johnsonPigCount++;
      console.log(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–∏–Ω–µ–π —É –º–∏—Å—Ç–µ—Ä–∞ –î–∂–æ–Ω—Å–æ–Ω–∞: ${johnsonPigCount}`);
      checkJohnsonStatus();
    }

    function checkJohnsonStatus() {
      if (pigCount > johnsonPigCount) {
        clearInterval(johnsonTimer);
        alert("–ï—Å—Ç—å! –î–∂–æ–Ω—Å–æ–Ω –ø–æ–∑–∞–¥–∏, –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—Ä—É—á–µ–Ω–∏—è —Å–≤–∏–Ω–Ω–æ–≥–æ –∫—É–±–∫–∞ –∏ —è –ø–æ–±–µ–¥–∏–ª!");
        startJohnsonTimer();
      }
    }

    function startJohnsonTimer() {
      let countdown = 300;
      const timerDisplay = setInterval(() => {
        if (countdown <= 0) {
          clearInterval(timerDisplay);
          johnsonPigCount += 1;
          alert("–£ –º–∏—Å—Ç–µ—Ä–∞ –î–∂–æ–Ω—Å–æ–Ω–∞ —Ç–µ–ø–µ—Ä—å 1 —Å–≤–∏–Ω—å—è –≤ —Å–µ–∫—É–Ω–¥—É!");
          return;
        }
        countdown--;
      }, 1000);
      
      setInterval(checkVictory, 1000);
    }

    function checkVictory() {
      if (johnsonPigCount - pigCount <= 50) {
        alert("–ü–û–ó–î–†–ê–í–õ–Ø–Æ, –ú–ò–°–¢–ï–† –î–ñ–û–ù–° –ü–û–í–ï–†–ñ–ï–ù, –¢–´ –ó–ê–°–õ–£–ñ–ò–õ –û–¢–î–´–• –ò –ü–û–•–í–ê–õ–£, –ê –ö–£–ë–û–ö –≠–¢–û –î–£–•–û–í–ù–û–ï –°–û–ö–†–û–í–ò–©–ï –≠–¢–û–ô –ò–ì–†–´!");
        johnsonFarmActive = false;
        johnsonPigCount = 15000;
        competitorButton.style.display = "none";
        competitorButtonVisible = false;
        localStorage.setItem('competitorButtonVisible', false);
      }
    }

    setInterval(() => {
      updatePlayTime();
      if (totalPlayTime >= 1200 && !johnsonShown) {
        showJohnsonArrival();
      }
    }, 1000);

    document.getElementById("click-upgrade").onclick = () => {
      if (pigBalance >= clickUpgradeCost) {
        pigBalance -= clickUpgradeCost;
        pigPerClick += 1;
        updateBalance();
        updatePigPerClick();
        clickUpgradeCost = Math.floor(clickUpgradeCost * 1.5);
        updateUpgradeButton();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏!");
      }
    };

    document.getElementById("barn-upgrade").onclick = () => {
      if (pigBalance >= barnUpgradeCost) {
        pigBalance -= barnUpgradeCost;
        pigPerClick += 1;
        updateBalance();
        updatePigPerClick();
        barnUpgradeCost += 5000;
        updateUpgradeButton();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–º–±–∞—Ä–∞!");
      }
    };

    document.getElementById("enhance-territory").onclick = () => {
      if (pigBalance >= territoryUpgradeCost) {
        pigBalance -= territoryUpgradeCost;
        const additionalClicks = Math.floor(Math.random() * 3) + 1;
        pigPerClick += additionalClicks;
        updateBalance();
        updatePigPerClick();
        territoryUpgradeCost += 5000;
        updateUpgradeButton();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –æ–±–ª–∞–≥–æ—Ä–æ–¥–∏–≤–∞–Ω–∏—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏!");
      }
    };

    document.getElementById("buy-pig-from-farm").onclick = () => {
      if (pigBalance >= 500000) {
        pigBalance -= 500000;
        pigCount += 1;
        updateFarmDisplay();
        updateBalance();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Å–≤–∏–Ω—å–∏!");
      }
    };

    document.getElementById("buy-carrot").onclick = () => {
      if (pigBalance >= 50000) {
        pigBalance -= 50000;
        updateBalance();
        alert("–í—ã –∫—É–ø–∏–ª–∏ –º–æ—Ä–∫–æ–≤—å, –Ω–æ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –æ–Ω–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å!");

        if (Math.random() < 0.5) {
          timeUntilNextPig = 120;
          alert("–í—ã —É—Å–∫–æ—Ä–∏–ª–∏ —Ç–∞–π–º–µ—Ä –¥–æ 2 –º–∏–Ω—É—Ç!");
        } else {
          alert("–í—ã –∫—É–ø–∏–ª–∏ –º–æ—Ä–∫–æ–≤—å, –Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å —É—Å–∫–æ—Ä–∏—Ç—å —Ç–∞–π–º–µ—Ä.");
        }
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –º–æ—Ä–∫–æ–≤–∏!");
      }
    };

    document.getElementById("clean-manure").onclick = () => {
      manureCount -= 10;
      if (manureCount < 0) manureCount = 0;
      updateFarmDisplay();
    };

    document.getElementById("use-shovel").onclick = () => {
      let shovelChoice = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ª–æ–ø–∞—Ç—ã, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (1, 2 –∏–ª–∏ 3):");
      switch (shovelChoice) {
        case '1':
          if (shovels.shovel1 > 0) {
            manureCount = Math.max(manureCount - 1000, 0);
            shovels.shovel1--;
            updateFarmDisplay();
            alert("–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ª–æ–ø–∞—Ç—É 1!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 1!");
          }
          break;
        case '2':
          if (shovels.shovel2 > 0) {
            manureCount = Math.max(manureCount - 10000, 0);
            shovels.shovel2--;
            updateFarmDisplay();
            alert("–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ª–æ–ø–∞—Ç—É 2!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 2!");
          }
          break;
        case '3':
          if (shovels.shovel3 > 0) {
            manureCount = Math.max(manureCount - 100000, 0);
            shovels.shovel3--;
            updateFarmDisplay();
            alert("–í—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ª–æ–ø–∞—Ç—É 3!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 3!");
          }
          break;
        default:
          alert("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä –ª–æ–ø–∞—Ç—ã!");
      }
    };

    // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
    document.getElementById("shop-button").onclick = () => {
      shopModal.style.display = "block";
      setTimeout(() => {
        shopModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-shop").onclick = () => {
      shopModal.style.opacity = 0;
      setTimeout(() => {
        shopModal.style.display = "none";
      }, 500);
    };

    document.getElementById("buy-shovel1").onclick = () => {
      if (pigBalance >= 10000) {
        pigBalance -= 10000;
        shovels.shovel1++;
        updateBalance();
        localStorage.setItem('shovel1', shovels.shovel1);
        alert("–í—ã –∫—É–ø–∏–ª–∏ –ª–æ–ø–∞—Ç—É 1!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 1!");
      }
    };

    document.getElementById("buy-shovel2").onclick = () => {
      if (pigBalance >= 100000) {
        pigBalance -= 100000;
        shovels.shovel2++;
        updateBalance();
        localStorage.setItem('shovel2', shovels.shovel2);
        alert("–í—ã –∫—É–ø–∏–ª–∏ –ª–æ–ø–∞—Ç—É 2!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 2!");
      }
    };

    document.getElementById("buy-shovel3").onclick = () => {
      if (pigBalance >= 500000) {
        pigBalance -= 500000;
        shovels.shovel3++;
        updateBalance();
        localStorage.setItem('shovel3', shovels.shovel3);
        alert("–í—ã –∫—É–ø–∏–ª–∏ –ª–æ–ø–∞—Ç—É 3!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 3!");
      }
    };

    document.getElementById("farm-button").onclick = () => {
      farmWindow.style.display = "block";
      setTimeout(() => {
        farmWindow.style.opacity = 1;
      }, 10);
      updateFarmDisplay();
    };

    document.getElementById("close-farm").onclick = () => {
      farmWindow.style.opacity = 0;
      setTimeout(() => {
        farmWindow.style.display = "none";
      }, 500);
    };

    document.getElementById("upgrades-button").onclick = () => {
      upgradesModal.style.display = "block";
      setTimeout(() => {
        upgradesModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-upgrades").onclick = () => {
      upgradesModal.style.opacity = 0;
      setTimeout(() => {
        upgradesModal.style.display = "none";
      }, 500);
    };

    document.getElementById("help-button").onclick = () => {
      helpModal.style.display = "block";
      setTimeout(() => {
        helpModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-help").onclick = () => {
      helpModal.style.opacity = 0;
      setTimeout(() => {
        helpModal.style.display = "none";
      }, 500);
    };

    document.getElementById("close-congrats").onclick = () => {
      congratsModal.style.opacity = 0;
      setTimeout(() => {
        congratsModal.style.display = "none";
      }, 500);
    };

    document.getElementById("manure-help-button").onclick = () => {
      manureHelpModal.style.display = "block";
      setTimeout(() => {
        manureHelpModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-manure-help").onclick = () => {
      manureHelpModal.style.opacity = 0;
      setTimeout(() => {
        manureHelpModal.style.display = "none";
      }, 500);
    };

    window.onload = () => {
      updatePlayerNameDisplay();
      updateFarmDisplay();
      updatePigPerClick();
      updatePlayTime();

      pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
      pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
      totalPlayTime = localStorage.getItem('totalPlayTime') ? parseInt(localStorage.getItem('totalPlayTime')) : 0;
      johnsonPigCount = localStorage.getItem('johnsonPigCount') ? parseInt(localStorage.getItem('johnsonPigCount')) : 15000;
      johnsonShown = localStorage.getItem('johnsonShown') ? JSON.parse(localStorage.getItem('johnsonShown')) : false;
      competitorButtonVisible = localStorage.getItem('competitorButtonVisible') ? JSON.parse(localStorage.getItem('competitorButtonVisible')) : false;

      if (competitorButtonVisible) {
        competitorButton.style.display = "block";
      }

      clickUpgradeCost = localStorage.getItem('clickUpgradeCost') ? parseInt(localStorage.getItem('clickUpgradeCost')) : 100;
      barnUpgradeCost = localStorage.getItem('barnUpgradeCost') ? parseInt(localStorage.getItem('barnUpgradeCost')) : 5000;
      territoryUpgradeCost = localStorage.getItem('territoryUpgradeCost') ? parseInt(localStorage.getItem('territoryUpgradeCost')) : 5000;
      manureCount = localStorage.getItem('manureCount') ? parseInt(localStorage.getItem('manureCount')) : 0;

      updatePlayTime();
      updateBalance();
    };

    window.onbeforeunload = () => {
      localStorage.setItem('pigBalance', pigBalance);
      localStorage.setItem('pigCount', pigCount);
      localStorage.setItem('pigPerClick', pigPerClick);
      localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      localStorage.setItem('playerName', playerName);
      localStorage.setItem('clickUpgradeCost', clickUpgradeCost);
      localStorage.setItem('barnUpgradeCost', barnUpgradeCost);
      localStorage.setItem('territoryUpgradeCost', territoryUpgradeCost);
      localStorage.setItem('manureCount', manureCount);
      localStorage.setItem('shovel1', shovels.shovel1);
      localStorage.setItem('shovel2', shovels.shovel2);
      localStorage.setItem('shovel3', shovels.shovel3);
      localStorage.setItem('totalPlayTime', totalPlayTime);
      localStorage.setItem('johnsonPigCount', johnsonPigCount);
      localStorage.setItem('johnsonShown', johnsonShown);
      localStorage.setItem('competitorButtonVisible', competitorButtonVisible);
    };

    function showCongratsModal() {
      congratsModal.style.display = "block";
      setTimeout(() => {
        congratsModal.style.opacity = 1;
      }, 10);
    }
    
    // –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–≤–∏–Ω–∫–∏ –¥–ª—è –¥–µ–∫–æ—Ä–∞
    function createGrassBlades() {
      const grassDecoration = document.querySelector('.grass-decoration');
      for (let i = 0; i < 30; i++) {
        const blade = document.createElement('div');
        blade.className = 'grass-blade';
        blade.style.left = `${Math.random() * 100}%`;
        blade.style.height = `${15 + Math.random() * 25}px`;
        grassDecoration.appendChild(blade);
      }
    }
    
    window.onload = () => {
      updatePlayerNameDisplay();
      updateFarmDisplay();
      updatePigPerClick();
      updatePlayTime();

      pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
      pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
      totalPlayTime = localStorage.getItem('totalPlayTime') ? parseInt(localStorage.getItem('totalPlayTime')) : 0;
      johnsonPigCount = localStorage.getItem('johnsonPigCount') ? parseInt(localStorage.getItem('johnsonPigCount')) : 15000;
      johnsonShown = localStorage.getItem('johnsonShown') ? JSON.parse(localStorage.getItem('johnsonShown')) : false;
      competitorButtonVisible = localStorage.getItem('competitorButtonVisible') ? JSON.parse(localStorage.getItem('competitorButtonVisible')) : false;

      if (competitorButtonVisible) {
        competitorButton.style.display = "block";
      }

      clickUpgradeCost = localStorage.getItem('clickUpgradeCost') ? parseInt(localStorage.getItem('clickUpgradeCost')) : 100;
      barnUpgradeCost = localStorage.getItem('barnUpgradeCost') ? parseInt(localStorage.getItem('barnUpgradeCost')) : 5000;
      territoryUpgradeCost = localStorage.getItem('territoryUpgradeCost') ? parseInt(localStorage.getItem('territoryUpgradeCost')) : 5000;
      manureCount = localStorage.getItem('manureCount') ? parseInt(localStorage.getItem('manureCount')) : 0;

      updatePlayTime();
      updateBalance();
      createGrassBlades();
    };
  </script>
</body>
</html>
