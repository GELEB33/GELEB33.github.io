<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PIG Clicker - –ú–∏–ª–∞—è —Å–≤–∏–Ω–æ—Ñ–µ—Ä–º–∞</title>
  
  <style>
    :root {
      --primary-color: #FFB6C1;
      --secondary-color: #FFC0CB;
      --dark-color: #D87093;
      --light-color: #FFE4E9;
      --pig-nose: #F8A5C2;
      --grass-green: #7CFC00;
      --sky-blue: #87CEEB;
      --barn-red: #8B4513;
      --coin-gold: #FFD700;
      --button-shadow: #A64D79;
    }

    body {
      background: linear-gradient(135deg, var(--sky-blue) 0%, #98FB98 100%);
      color: #333;
      font-family: 'Comic Neue', 'Arial Rounded MT Bold', 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .game-container {
      border: 8px solid var(--primary-color);
      border-radius: 25px;
      padding: 25px;
      background: linear-gradient(145deg, #ffffff 0%, var(--light-color) 100%);
      max-width: 1000px;
      width: 90%;
      display: inline-block;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      margin: auto;
      margin-top: 20px;
    }

    .game-container::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 15px;
      background: repeating-linear-gradient(
        90deg,
        var(--primary-color),
        var(--primary-color) 20px,
        var(--secondary-color) 20px,
        var(--secondary-color) 40px
      );
      border-radius: 25px 25px 0 0;
    }

    .header {
      margin-bottom: 25px;
      position: relative;
    }

    h1 {
      font-size: 52px;
      color: var(--dark-color);
      text-shadow: 3px 3px 0px rgba(255, 182, 193, 0.3);
      margin: 0 0 15px 0;
      padding: 15px 30px;
      background-color: white;
      border-radius: 20px;
      display: inline-block;
      border: 5px solid var(--primary-color);
      box-shadow: 0 8px 0 rgba(216, 112, 147, 0.2);
      letter-spacing: 1px;
    }

    .stats-container {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-box {
      background: white;
      padding: 15px 25px;
      border-radius: 15px;
      border: 4px solid var(--primary-color);
      font-size: 22px;
      font-weight: bold;
      color: var(--dark-color);
      box-shadow: 0 6px 0 rgba(216, 112, 147, 0.2);
      min-width: 200px;
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    .stat-box::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }

    .pig-container {
      position: relative;
      margin: 30px auto;
      width: 220px;
      height: 220px;
      cursor: pointer;
    }

    .pig-body {
      width: 200px;
      height: 180px;
      background: linear-gradient(145deg, #FFC0CB, #FFB6C1);
      border-radius: 50% 50% 45% 45%;
      position: relative;
      margin: 0 auto;
      box-shadow: 
        inset 0 -15px 20px rgba(0,0,0,0.1),
        0 10px 25px rgba(0,0,0,0.15);
      transition: transform 0.1s;
    }

    .pig-body:hover {
      transform: scale(1.05);
    }

    .pig-body.click-cooldown {
      cursor: not-allowed;
      opacity: 0.7;
      filter: grayscale(30%);
    }

    .pig-ear {
      position: absolute;
      width: 60px;
      height: 50px;
      background: #FFB6C1;
      border-radius: 50%;
      top: -15px;
    }

    .pig-ear.left {
      left: 25px;
      transform: rotate(-15deg);
    }

    .pig-ear.right {
      right: 25px;
      transform: rotate(15deg);
    }

    .pig-ear-inner {
      position: absolute;
      width: 40px;
      height: 30px;
      background: #FF8BA7;
      border-radius: 50%;
      top: 10px;
      left: 10px;
    }

    .pig-eye {
      position: absolute;
      width: 25px;
      height: 25px;
      background: white;
      border-radius: 50%;
      top: 60px;
      border: 3px solid #333;
      overflow: hidden;
    }

    .pig-eye.left {
      left: 55px;
    }

    .pig-eye.right {
      right: 55px;
    }

    .pig-eye::after {
      content: "";
      position: absolute;
      width: 12px;
      height: 12px;
      background: #333;
      border-radius: 50%;
      top: 5px;
      left: 5px;
    }

    .pig-nose {
      position: absolute;
      width: 80px;
      height: 50px;
      background: var(--pig-nose);
      border-radius: 50%;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      border: 4px solid #D87093;
      box-shadow: inset 0 5px 10px rgba(0,0,0,0.1);
    }

    .nose-hole {
      position: absolute;
      width: 18px;
      height: 18px;
      background: #8B5A5A;
      border-radius: 50%;
      top: 16px;
    }

    .nose-hole.left {
      left: 18px;
    }

    .nose-hole.right {
      right: 18px;
    }

    .pig-mouth {
      position: absolute;
      width: 40px;
      height: 15px;
      background: transparent;
      border-bottom: 4px solid #D87093;
      border-radius: 0 0 50% 50%;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
    }

    .buttons-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .game-button {
      font-size: 20px;
      padding: 15px 20px;
      background: linear-gradient(to bottom, var(--primary-color), var(--dark-color));
      border: none;
      border-radius: 15px;
      cursor: pointer;
      color: white;
      font-weight: bold;
      transition: all 0.2s;
      box-shadow: 0 8px 0 var(--button-shadow);
      letter-spacing: 0.5px;
      position: relative;
      overflow: hidden;
    }

    .game-button:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 11px 0 var(--button-shadow);
    }

    .game-button:active:not(:disabled) {
      transform: translateY(4px);
      box-shadow: 0 4px 0 var(--button-shadow);
    }

    .game-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .game-button::after {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .game-button:hover:not(:disabled)::after {
      left: 100%;
    }

    .fact-box {
      background: white;
      padding: 20px;
      border-radius: 15px;
      border: 4px dashed var(--primary-color);
      margin: 25px 0;
      font-size: 20px;
      color: #555;
      font-style: italic;
      position: relative;
    }

    .fact-box::before {
      content: "üí°";
      position: absolute;
      left: 15px;
      top: 15px;
      font-size: 24px;
    }

    .warning {
      color: #FF4500;
      font-weight: bold;
      font-size: 18px;
      margin-top: 20px;
      text-shadow: 1px 1px 0px rgba(255,255,255,0.5);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: opacity 0.5s ease;
      max-width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
      background: linear-gradient(135deg, #ffffff 0%, var(--light-color) 100%);
      border: 8px solid var(--primary-color);
      color: #333;
    }

    .modal h1 {
      font-size: 36px;
      margin-bottom: 25px;
      color: var(--dark-color);
    }

    .modal-content {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    /* –§–µ—Ä–º–∞ —Ç–µ–ø–µ—Ä—å –∫–∞–∫ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    #farm-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transition: opacity 0.5s ease;
      max-width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
      background: linear-gradient(135deg, #E0FFFF 0%, #98FB98 100%);
      border: 8px solid #8B4513;
      color: #333;
    }

    #farm-modal h1 {
      color: #8B4513;
      border-color: #8B4513;
    }

    .pig-count-display {
      font-size: 28px;
      color: var(--dark-color);
      font-weight: bold;
      margin: 10px 0;
      text-shadow: 1px 1px 0px white;
    }

    .coin-animation {
      position: absolute;
      font-size: 24px;
      color: var(--coin-gold);
      font-weight: bold;
      pointer-events: none;
      animation: coinFloat 1s forwards;
      text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
    }

    @keyframes coinFloat {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) scale(0.5);
        opacity: 0;
      }
    }

    @keyframes pigClick {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .pig-click-animation {
      animation: pigClick 0.2s;
    }

    .grass-decoration {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: linear-gradient(to top, var(--grass-green), #32CD32);
      border-radius: 0 0 15px 15px;
      z-index: 1;
    }

    .grass-blade {
      position: absolute;
      bottom: 40px;
      width: 5px;
      height: 20px;
      background: var(--grass-green);
      border-radius: 5px 5px 0 0;
    }

    .grass-blade:nth-child(odd) {
      transform: rotate(-15deg);
    }

    .grass-blade:nth-child(even) {
      transform: rotate(15deg);
    }

    .floating-pig {
      position: absolute;
      font-size: 30px;
      pointer-events: none;
      animation: floatAround 20s infinite linear;
      z-index: -1;
      opacity: 0.3;
    }

    @keyframes floatAround {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(100px, 50px) rotate(90deg); }
      50% { transform: translate(50px, 100px) rotate(180deg); }
      75% { transform: translate(-50px, 50px) rotate(270deg); }
      100% { transform: translate(0, 0) rotate(360deg); }
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
    .settings-panel {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 10px;
      z-index: 100;
    }

    .settings-button {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: transform 0.2s;
      background: linear-gradient(to bottom, var(--primary-color), var(--dark-color));
      color: white;
    }

    .settings-button:hover {
      transform: scale(1.1);
    }

    .color-palette {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 15px;
    }

    .color-option {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      border: 3px solid white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }

    .color-option:hover {
      transform: scale(1.1);
    }

    .color-option.selected {
      border: 3px solid #333;
      box-shadow: 0 0 0 3px white, 0 0 0 5px #333;
    }

    .name-change-input {
      padding: 12px 15px;
      font-size: 18px;
      border: 3px solid var(--primary-color);
      border-radius: 10px;
      width: 100%;
      margin-bottom: 15px;
      font-family: 'Comic Neue', sans-serif;
    }

    .upgrade-info {
      font-size: 14px;
      color: #666;
      margin-top: 5px;
    }

    .event-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(to right, #FFD700, #FFA500);
      color: #333;
      padding: 15px 25px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 2000;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: slideDown 0.5s ease, fadeOut 0.5s ease 2.5s forwards;
    }

    @keyframes slideDown {
      from { top: -100px; }
      to { top: 20px; }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .cooldown-indicator {
      position: absolute;
      top: -10px;
      right: -10px;
      width: 30px;
      height: 30px;
      background: #FF4500;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
      border: 2px solid var(--primary-color);
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, var(--primary-color), var(--dark-color));
      width: 0%;
      transition: width 0.3s;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 36px;
      }
      
      .stat-box {
        font-size: 18px;
        min-width: 150px;
        padding: 12px 15px;
      }
      
      .game-button {
        font-size: 18px;
        padding: 12px 15px;
      }
      
      .pig-container {
        width: 180px;
        height: 180px;
      }
      
      .pig-body {
        width: 160px;
        height: 140px;
      }
      
      .settings-panel {
        position: relative;
        top: 0;
        right: 0;
        justify-content: center;
        margin-bottom: 15px;
      }
    }

    @media (max-width: 480px) {
      .game-container {
        padding: 15px;
      }
      
      h1 {
        font-size: 28px;
        padding: 10px 15px;
      }
      
      .buttons-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
  
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- –ü–ª–∞–≤–∞—é—â–∏–µ —Å–≤–∏–Ω–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ -->
  <div class="floating-pig" style="top: 10%; left: 5%;">üê∑</div>
  <div class="floating-pig" style="top: 20%; right: 10%;">üêñ</div>
  <div class="floating-pig" style="bottom: 15%; left: 15%;">üêΩ</div>
  <div class="floating-pig" style="bottom: 25%; right: 5%;">üê∑</div>
  
  <div class="settings-panel">
    <button class="settings-button" id="change-name-button" title="–ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è">üë§</button>
    <button class="settings-button" id="change-color-button" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç">üé®</button>
  </div>
  
  <div class="game-container">
    <div class="grass-decoration"></div>
    
    <div class="header">
      <h1>üê∑ PIG Clicker üê∑</h1>
    </div>
    
    <div class="stats-container">
      <div class="stat-box">
        <div>üë§ –ò–º—è: <span id="player-name">–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</span></div>
      </div>
      <div class="stat-box">
        <div>üí∞ –ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> pigcoin</div>
      </div>
      <div class="stat-box">
        <div>üëÜ –ó–∞ –∫–ª–∏–∫: <span id="pig-per-click">1</span> pigcoin</div>
      </div>
      <div class="stat-box">
        <div>‚è±Ô∏è –í—Ä–µ–º—è –≤ –∏–≥—Ä–µ: <span id="play-time">0:00</span></div>
      </div>
      <div class="stat-box">
        <div>üéØ –ö–ª–∏–∫–æ–≤: <span id="total-clicks">0</span></div>
      </div>
    </div>
    
    <div class="fact-box">
      <div id="fact">–§–∞–∫—Ç: –í –º–∏—Ä–µ –ø–æ—á—Ç–∏ –¥–≤–∞ –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π!</div>
    </div>
    
    <div class="pig-container">
      <div class="pig-body" id="pig-emoji">
        <div class="pig-ear left">
          <div class="pig-ear-inner"></div>
        </div>
        <div class="pig-ear right">
          <div class="pig-ear-inner"></div>
        </div>
        <div class="pig-eye left"></div>
        <div class="pig-eye right"></div>
        <div class="pig-nose">
          <div class="nose-hole left"></div>
          <div class="nose-hole right"></div>
        </div>
        <div class="pig-mouth"></div>
      </div>
      <div style="margin-top: 15px; font-weight: bold; color: var(--dark-color);">–ö–ª–∏–∫–Ω–∏ –Ω–∞ —Å–≤–∏–Ω–∫—É! (0.2—Å –∫—É–ª–¥–∞—É–Ω)</div>
    </div>
    
    <div class="buttons-container">
      <button class="game-button" id="upgrades-button">–£–ª—É—á—à–µ–Ω–∏—è</button>
      <button class="game-button" id="farm-button">–§–µ—Ä–º–∞</button>
      <button class="game-button" id="shop-button">–ú–∞–≥–∞–∑–∏–Ω</button>
      <button class="game-button" id="help-button">–ü–æ–º–æ—â—å</button>
      <button class="game-button" id="lottery-button">–°–≤–∏–Ω–Ω–∞—è –ª–æ—Ç–µ—Ä–µ—è</button>
      <button class="game-button" id="events-button">–°–æ–±—ã—Ç–∏—è</button>
      <button class="game-button" id="achievements-button">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
      <button class="game-button" id="competitor-button" style="display: none;">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç</button>
    </div>
    
    <div class="warning">
      *–®–∞–Ω—Å 1% –ø–æ—Ç–µ—Ä—è—Ç—å —á–∞—Å—Ç—å –∫–ª–∏–∫–æ–≤ –∏ —Å–≤–∏–Ω–µ–π, –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ!
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="upgrades-modal" class="modal">
      <h1>üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è</h1>
      <div class="modal-content">
        <button class="game-button" id="click-upgrade">–ü—Ä–æ–∫–∞—á–∫–∞ –∫–ª–∏–∫–∞ (100 pigcoin)</button>
        <div class="upgrade-info">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 1</div>
        
        <button class="game-button" id="barn-upgrade">–£–ª—É—á—à–µ–Ω–∏–µ –∞–º–±–∞—Ä–∞ (+1 –∫–ª–∏–∫, <span id="barn-upgrade-cost">5000</span> pigcoin)</button>
        <div class="upgrade-info">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –¥–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫</div>
        
        <button class="game-button" id="enhance-territory">–û–±–ª–∞–≥–æ—Ä–æ–¥–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (5000 pigcoin)</button>
        <div class="upgrade-info">–°–ª—É—á–∞–π–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –∑–∞ –∫–ª–∏–∫ –Ω–∞ 1-3</div>
        
        <button class="game-button" id="auto-clicker-upgrade">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (<span id="auto-clicker-cost">10000</span> pigcoin)</button>
        <div class="upgrade-info">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∏–∫–∞–µ—Ç –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ (–£—Ä–æ–≤–µ–Ω—å: <span id="auto-clicker-level">0</span>)</div>
        
        <button class="game-button" id="pig-multiplier-upgrade">–ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–≤–∏–Ω–µ–π (<span id="pig-multiplier-cost">50000</span> pigcoin)</button>
        <div class="upgrade-info">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –æ—Ç —Å–≤–∏–Ω–µ–π –Ω–∞ 10% (–£—Ä–æ–≤–µ–Ω—å: <span id="pig-multiplier-level">1</span>x)</div>
        
        <button class="game-button" id="close-upgrades">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    
    <!-- –§–µ—Ä–º–∞ –∫–∞–∫ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="farm-modal" class="modal">
      <h1>üè° –í–∞—à–∞ —Ñ–µ—Ä–º–∞</h1>
      <div class="pig-count-display" id="pig-count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–∏–Ω–µ–π: 0</div>
      <div class="pig-count-display" id="manure-counter">–ù–∞–≤–æ–∑: 0</div>
      <div class="pig-count-display" id="farm-timer">–û–∂–∏–¥–∞–Ω–∏–µ: 0 —Å–µ–∫—É–Ω–¥</div>
      
      <div class="progress-bar">
        <div class="progress-fill" id="farm-progress"></div>
      </div>
      
      <div class="buttons-container">
        <button class="game-button" id="buy-pig-from-farm">–ö—É–ø–∏—Ç—å —Å–≤–∏–Ω—å—é (500000 pigcoin)</button>
        <button class="game-button" id="buy-carrot">–ö—É–ø–∏—Ç—å –º–æ—Ä–∫–æ–≤—å (50000 pigcoin)</button>
        <button class="game-button" id="clean-manure">–û—á–∏—Å—Ç–∏—Ç—å –Ω–∞–≤–æ–∑ (10 –∑–∞ –∫–ª–∏–∫)</button>
        <button class="game-button" id="use-shovel">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–ø–∞—Ç—É</button>
        <button class="game-button" id="manure-help-button">–ó–∞—á–µ–º —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑?</button>
        <button class="game-button" id="close-farm">–ó–∞–∫—Ä—ã—Ç—å —Ñ–µ—Ä–º—É</button>
      </div>
    </div>
    
    <div id="shop-modal" class="modal">
      <h1>üõí –ú–∞–≥–∞–∑–∏–Ω</h1>
      <div class="modal-content">
        <button class="game-button" id="buy-shovel1">–õ–æ–ø–∞—Ç–∞ 1 (–æ—á–∏—Å—Ç–∫–∞ 1000 –Ω–∞–≤–æ–∑–∞, 10000 pigcoin)</button>
        <button class="game-button" id="buy-shovel2">–õ–æ–ø–∞—Ç–∞ 2 (–æ—á–∏—Å—Ç–∫–∞ 10000 –Ω–∞–≤–æ–∑–∞, 100000 pigcoin)</button>
        <button class="game-button" id="buy-shovel3">–õ–æ–ø–∞—Ç–∞ 3 (–æ—á–∏—Å—Ç–∫–∞ 100000 –Ω–∞–≤–æ–∑–∞, 500000 pigcoin)</button>
        <button class="game-button" id="buy-piggy-bank">–°–≤–∏–Ω—å—è-–∫–æ–ø–∏–ª–∫–∞ (25000 pigcoin)</button>
        <div class="upgrade-info">–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: +1% –∫ –±–∞–ª–∞–Ω—Å—É –∫–∞–∂–¥—ã–π —á–∞—Å</div>
        <button class="game-button" id="close-shop">–ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>
      </div>
    </div>
    
    <div id="congrats-modal" class="modal">
      <h1>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h1>
      <div class="modal-content">
        <p style="font-size: 24px;">–í—ã –∫—É–ø–∏–ª–∏ 2 –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π! üê∑üèÜ</p>
        <button class="game-button" id="close-congrats">–£—Ä–∞!</button>
      </div>
    </div>
    
    <div id="help-modal" class="modal">
      <h1>‚ùì –¶–µ–ª—å –∏–≥—Ä—ã</h1>
      <div class="modal-content">
        <p style="text-align: left; font-size: 20px;">–°—Ç–∞—Ç—å —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π —Å–≤–∏–Ω–æ–π —Ñ–µ—Ä–º–æ–π –∏ –æ–±–∑–∞–≤–µ—Å—Ç–∏—Å—å —Å–∞–º—ã–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–¥–æ—Ä–æ–≤—ã—Ö —Å–≤–∏–Ω–µ–π!</p>
        <p style="text-align: left; font-size: 20px;">–ü–æ–ª—É—á–∞–π —Å–≤–∏–Ω–Ω—ã–µ –∫–æ–π–Ω—ã –∏ —Ç—Ä–∞—Ç—å –∏—Ö –Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è –∏–ª–∏ –ø–æ–∫—É–ø–∫—É –Ω–æ–≤—ã—Ö —Å–≤–∏–Ω–æ–∫, –æ–Ω–∏ —É–∂–µ –∂–¥—É—Ç, –∫–æ–≥–¥–∞ —Ç—ã –∏—Ö –∫—É–ø–∏—à—å!</p>
        <button class="game-button" id="close-help">–ü–æ–Ω—è—Ç–Ω–æ!</button>
      </div>
    </div>
    
    <div id="manure-help-modal" class="modal">
      <h1>üßπ –ü–æ—á–µ–º—É –Ω—É–∂–Ω–æ —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑?</h1>
      <div class="modal-content">
        <p style="text-align: left; font-size: 20px;">–ù–∞–≤–æ–∑ –º–æ–∂–µ—Ç –∑–∞—Å–æ—Ä—è—Ç—å –≤–∞—à—É —Ñ–µ—Ä–º—É –∏ —Å–Ω–∏–∂–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–≤–∏–Ω–µ–π. –ö–∞–∂–¥—ã–π –Ω–∞–≤–æ–∑ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∞–ª–∞–Ω—Å –≤–∞—à–∏—Ö pigcoin!</p>
        <p style="text-align: left; font-size: 20px;">–õ–æ–ø–∞—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç —É–±–∏—Ä–∞—Ç—å –Ω–∞–≤–æ–∑ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ —Ñ–µ—Ä–º–µ!</p>
        <button class="game-button" id="close-manure-help">–ü–æ–Ω—è—Ç–Ω–æ!</button>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ -->
    <div id="change-name-modal" class="modal">
      <h1>üë§ –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</h1>
      <div class="modal-content">
        <input type="text" class="name-change-input" id="new-player-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="20">
        <button class="game-button" id="save-name-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–º—è</button>
        <button class="game-button" id="close-name-modal">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞ -->
    <div id="change-color-modal" class="modal">
      <h1>üé® –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h1>
      <div class="modal-content">
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à—É—é—Å—è —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É:</p>
        <div class="color-palette">
          <div class="color-option selected" data-theme="pink" style="background: #FFB6C1;" title="–†–æ–∑–æ–≤–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="blue" style="background: #6AB0DE;" title="–ì–æ–ª—É–±–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="green" style="background: #77DD77;" title="–ó–µ–ª–µ–Ω–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="purple" style="background: #B19CD9;" title="–§–∏–æ–ª–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="orange" style="background: #FFB347;" title="–û—Ä–∞–Ω–∂–µ–≤–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="teal" style="background: #6EC4B2;" title="–ë–∏—Ä—é–∑–æ–≤–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="coral" style="background: #FF7F50;" title="–ö–æ—Ä–∞–ª–ª–æ–≤–∞—è —Ç–µ–º–∞"></div>
          <div class="color-option" data-theme="lavender" style="background: #E6E6FA;" title="–õ–∞–≤–∞–Ω–¥–æ–≤–∞—è —Ç–µ–º–∞"></div>
        </div>
        <button class="game-button" id="close-color-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–±—ã—Ç–∏–π -->
    <div id="events-modal" class="modal">
      <h1>üé™ –°–æ–±—ã—Ç–∏—è</h1>
      <div class="modal-content">
        <div class="pig-count-display">–¢–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ: <span id="current-event">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π</span></div>
        <div class="pig-count-display">–í—Ä–µ–º—è –¥–æ –∫–æ–Ω—Ü–∞: <span id="event-timer">--:--</span></div>
        
        <button class="game-button" id="buy-event-boost">–£—Å–∫–æ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ (5000 pigcoin)</button>
        <div class="upgrade-info">–£—Å–∫–æ—Ä—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ –≤ 2 —Ä–∞–∑–∞ –Ω–∞ 10 –º–∏–Ω—É—Ç</div>
        
        <button class="game-button" id="start-pig-festival">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–∏–Ω–æ–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å (25000 pigcoin)</button>
        <div class="upgrade-info">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ –æ—Ç –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ 50% –Ω–∞ 30 –º–∏–Ω—É—Ç</div>
        
        <button class="game-button" id="start-golden-pigs">–ó–æ–ª–æ—Ç—ã–µ —Å–≤–∏–Ω—å–∏ (100000 pigcoin)</button>
        <div class="upgrade-info">–ö–∞–∂–¥—ã–π –∫–ª–∏–∫ –¥–∞–µ—Ç –≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ pigcoin –Ω–∞ 5 –º–∏–Ω—É—Ç</div>
        
        <button class="game-button" id="close-events">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π -->
    <div id="achievements-modal" class="modal">
      <h1>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>
      <div class="modal-content">
        <div style="text-align: left;">
          <div class="achievement" id="achievement-1">üê∑ –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫ - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-2">üí∞ 1000 pigcoin - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-3">üëë 10000 pigcoin - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-4">üèÜ 10 —Å–≤–∏–Ω–µ–π - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-5">‚≠ê 100 –∫–ª–∏–∫–æ–≤ - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-6">üöÄ 1000 –∫–ª–∏–∫–æ–≤ - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
          <div class="achievement" id="achievement-7">üíé 1 —á–∞—Å –∏–≥—Ä—ã - <span class="achievement-status">–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span></div>
        </div>
        
        <div class="pig-count-display">–í—ã–ø–æ–ª–Ω–µ–Ω–æ: <span id="achievements-completed">0</span>/7</div>
        
        <button class="game-button" id="close-achievements">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <script>
    // –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã
    const colorThemes = {
      pink: {
        primary: '#FFB6C1',
        secondary: '#FFC0CB',
        dark: '#D87093',
        light: '#FFE4E9',
        shadow: '#A64D79'
      },
      blue: {
        primary: '#6AB0DE',
        secondary: '#87CEEB',
        dark: '#4682B4',
        light: '#E6F2FF',
        shadow: '#36648B'
      },
      green: {
        primary: '#77DD77',
        secondary: '#98FB98',
        dark: '#32CD32',
        light: '#F0FFF0',
        shadow: '#228B22'
      },
      purple: {
        primary: '#B19CD9',
        secondary: '#D8BFD8',
        dark: '#9370DB',
        light: '#F5F0FF',
        shadow: '#663399'
      },
      orange: {
        primary: '#FFB347',
        secondary: '#FFD700',
        dark: '#FF8C00',
        light: '#FFF5E6',
        shadow: '#CC5500'
      },
      teal: {
        primary: '#6EC4B2',
        secondary: '#AFE0D6',
        dark: '#20B2AA',
        light: '#E0F7FA',
        shadow: '#008080'
      },
      coral: {
        primary: '#FF7F50',
        secondary: '#FFA07A',
        dark: '#FF6347',
        light: '#FFE4E1',
        shadow: '#CD5C5C'
      },
      lavender: {
        primary: '#E6E6FA',
        secondary: '#D8BFD8',
        dark: '#9370DB',
        light: '#F8F8FF',
        shadow: '#8A2BE2'
      }
    };

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
    const pigFacts = [
      "–°–≤–∏–Ω—å–∏ –æ—á–µ–Ω—å —É–º–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—É—á–µ–Ω—ã —Ä–∞–∑–Ω—ã–º —Ç—Ä—é–∫–∞–º.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç –æ–±–æ–Ω—è—Ç—å —Ç—Ä—é—Ñ–µ–ª–∏ –ø–æ–¥ –∑–µ–º–ª—ë–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤–æ–µ–º—É –æ—Å—Ç—Ä–æ—É–º–Ω–æ–º—É –Ω—é—Ö—É.",
      "–°–≤–∏–Ω—å–∏ ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∂–∏–≤–æ—Ç–Ω—ã–µ –∏ —á–∞—Å—Ç–æ –∂–∏–≤—É—Ç –≤ –≥—Ä—É–ø–ø–∞—Ö.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ –¥—Ä—É–∂–±—É –º–µ–∂–¥—É —Å–æ–±–æ–π.",
      "–°–≤–∏–Ω—å–∏ –∏–º–µ—é—Ç –æ—Ç–ª–∏—á–Ω–æ–µ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –∏ –º–æ–≥—É—Ç –≤–∏–¥–µ—Ç—å —Ü–≤–µ—Ç–∞.",
      "–û–¥–Ω–∞ —Å–≤–∏–Ω—å—è –º–æ–∂–µ—Ç –Ω–∞—Ä–æ–∂–∞—Ç—å –¥–æ 32 –ø–æ—Ä–æ—Å—è—Ç –∑–∞ —Ä–∞–∑.",
      "–°–æ–≥–ª–∞—Å–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è–º, —Å–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏.",
      "–≠—Ç–æ –ø—Ä–∞–≤–¥–∞, —á—Ç–æ –≤ –º–∏—Ä–µ –∂–∏–≤—ë—Ç –ø–æ—á—Ç–∏ 2 –º–∏–ª–ª–∏–∞—Ä–¥–∞ —Å–≤–∏–Ω–µ–π.",
      "–°–≤–∏–Ω—å–∏ –º–æ–≥—É—Ç –∏–∑–¥–∞–≤–∞—Ç—å –æ–∫–æ–ª–æ 20 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–≤—É–∫–æ–≤."
    ];

    let pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
    let pigPerClick = localStorage.getItem('pigPerClick') ? parseInt(localStorage.getItem('pigPerClick')) : 1;
    let playerName = localStorage.getItem('playerName') || "–ò–≥—Ä–æ–∫";
    let pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
    let timeUntilNextPig = localStorage.getItem('timeUntilNextPig') ? parseInt(localStorage.getItem('timeUntilNextPig')) : 3600;
    let pigsToSpawn = Math.floor(Math.random() * 5) + 1;
    let farmActive = false;
    let clickUpgradeCost = localStorage.getItem('clickUpgradeCost') ? parseInt(localStorage.getItem('clickUpgradeCost')) : 100;
    let barnUpgradeCost = localStorage.getItem('barnUpgradeCost') ? parseInt(localStorage.getItem('barnUpgradeCost')) : 5000;
    let territoryUpgradeCost = localStorage.getItem('territoryUpgradeCost') ? parseInt(localStorage.getItem('territoryUpgradeCost')) : 5000;
    let manureCount = localStorage.getItem('manureCount') ? parseInt(localStorage.getItem('manureCount')) : 0;
    let shovels = {
      shovel1: localStorage.getItem('shovel1') ? parseInt(localStorage.getItem('shovel1')) : 0,
      shovel2: localStorage.getItem('shovel2') ? parseInt(localStorage.getItem('shovel2')) : 0,
      shovel3: localStorage.getItem('shovel3') ? parseInt(localStorage.getItem('shovel3')) : 0
    };

    // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
    let totalPlayTime = localStorage.getItem('totalPlayTime') ? parseInt(localStorage.getItem('totalPlayTime')) : 0;
    let totalClicks = localStorage.getItem('totalClicks') ? parseInt(localStorage.getItem('totalClicks')) : 0;
    let johnsonPigCount = localStorage.getItem('johnsonPigCount') ? parseInt(localStorage.getItem('johnsonPigCount')) : 15000;
    let johnsonFarmActive = false;
    let johnsonTimer;
    let johnsonShown = localStorage.getItem('johnsonShown') ? JSON.parse(localStorage.getItem('johnsonShown')) : false;
    let competitorButtonVisible = localStorage.getItem('competitorButtonVisible') ? JSON.parse(localStorage.getItem('competitorButtonVisible')) : false;
    let currentTheme = localStorage.getItem('currentTheme') || 'pink';
    
    // –ö—É–ª–¥–∞—É–Ω –¥–ª—è –∫–ª–∏–∫–∞
    let clickCooldown = false;
    const CLICK_COOLDOWN_TIME = 200; // 0.2 —Å–µ–∫—É–Ω–¥—ã
    
    // –ù–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
    let autoClickerLevel = localStorage.getItem('autoClickerLevel') ? parseInt(localStorage.getItem('autoClickerLevel')) : 0;
    let autoClickerCost = localStorage.getItem('autoClickerCost') ? parseInt(localStorage.getItem('autoClickerCost')) : 10000;
    let autoClickerInterval;
    
    let pigMultiplierLevel = localStorage.getItem('pigMultiplierLevel') ? parseFloat(localStorage.getItem('pigMultiplierLevel')) : 1.0;
    let pigMultiplierCost = localStorage.getItem('pigMultiplierCost') ? parseInt(localStorage.getItem('pigMultiplierCost')) : 50000;
    
    let hasPiggyBank = localStorage.getItem('hasPiggyBank') ? JSON.parse(localStorage.getItem('hasPiggyBank')) : false;
    
    // –°–æ–±—ã—Ç–∏—è
    let currentEvent = localStorage.getItem('currentEvent') || null;
    let eventEndTime = localStorage.getItem('eventEndTime') ? parseInt(localStorage.getItem('eventEndTime')) : 0;
    let eventMultiplier = localStorage.getItem('eventMultiplier') ? parseFloat(localStorage.getItem('eventMultiplier')) : 1.0;
    
    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    let achievements = {
      firstClick: localStorage.getItem('achievementFirstClick') ? JSON.parse(localStorage.getItem('achievementFirstClick')) : false,
      thousandCoins: localStorage.getItem('achievementThousandCoins') ? JSON.parse(localStorage.getItem('achievementThousandCoins')) : false,
      tenThousandCoins: localStorage.getItem('achievementTenThousandCoins') ? JSON.parse(localStorage.getItem('achievementTenThousandCoins')) : false,
      tenPigs: localStorage.getItem('achievementTenPigs') ? JSON.parse(localStorage.getItem('achievementTenPigs')) : false,
      hundredClicks: localStorage.getItem('achievementHundredClicks') ? JSON.parse(localStorage.getItem('achievementHundredClicks')) : false,
      thousandClicks: localStorage.getItem('achievementThousandClicks') ? JSON.parse(localStorage.getItem('achievementThousandClicks')) : false,
      oneHourPlay: localStorage.getItem('achievementOneHourPlay') ? JSON.parse(localStorage.getItem('achievementOneHourPlay')) : false,
    };

    // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    applyTheme(currentTheme);

    const balanceDisplay = document.getElementById("balance");
    const pigEmoji = document.getElementById("pig-emoji");
    const playerNameDisplay = document.getElementById("player-name");
    const pigPerClickDisplay = document.getElementById("pig-per-click");
    const pigCountDisplay = document.getElementById("pig-count");
    const manureCounterDisplay = document.getElementById("manure-counter");
    const playTimeDisplay = document.getElementById("play-time");
    const totalClicksDisplay = document.getElementById("total-clicks");
    const factDisplay = document.getElementById("fact");
    const upgradesModal = document.getElementById("upgrades-modal");
    const farmModal = document.getElementById("farm-modal");
    const shopModal = document.getElementById("shop-modal");
    const helpModal = document.getElementById("help-modal");
    const manureHelpModal = document.getElementById("manure-help-modal");
    const congratsModal = document.getElementById("congrats-modal");
    const farmTimerDisplay = document.getElementById("farm-timer");
    const competitorButton = document.getElementById("competitor-button");
    const changeNameModal = document.getElementById("change-name-modal");
    const changeColorModal = document.getElementById("change-color-modal");
    const eventsModal = document.getElementById("events-modal");
    const achievementsModal = document.getElementById("achievements-modal");

    if (competitorButtonVisible) {
      competitorButton.style.display = "block";
    }

    function updateBalance() {
      balanceDisplay.textContent = pigBalance.toLocaleString();
      localStorage.setItem('pigBalance', pigBalance);
      localStorage.setItem('clickUpgradeCost', clickUpgradeCost);
      localStorage.setItem('barnUpgradeCost', barnUpgradeCost);
      localStorage.setItem('territoryUpgradeCost', territoryUpgradeCost);
      updateUpgradeButton();
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      checkAchievements();
      
      if (pigCount >= 2000000000) {
        showCongratsModal();
      }
    }

    function updatePlayTime() {
      const minutes = Math.floor(totalPlayTime / 60);
      const seconds = totalPlayTime % 60;
      playTimeDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      localStorage.setItem('totalPlayTime', totalPlayTime);
    }

    function updateTotalClicks() {
      totalClicksDisplay.textContent = totalClicks.toLocaleString();
      localStorage.setItem('totalClicks', totalClicks);
    }

    function updateUpgradeButton() {
      document.getElementById("click-upgrade").textContent = `–ü—Ä–æ–∫–∞—á–∫–∞ –∫–ª–∏–∫–∞ (${clickUpgradeCost.toLocaleString()} pigcoin)`;
      document.getElementById("barn-upgrade").textContent = `–£–ª—É—á—à–µ–Ω–∏–µ –∞–º–±–∞—Ä–∞ (+1 –∫–ª–∏–∫, ${barnUpgradeCost.toLocaleString()} pigcoin)`;
      document.getElementById("enhance-territory").textContent = `–û–±–ª–∞–≥–æ—Ä–æ–¥–∏—Ç—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (${territoryUpgradeCost.toLocaleString()} pigcoin)`;
      document.getElementById("auto-clicker-upgrade").textContent = `–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä (${autoClickerCost.toLocaleString()} pigcoin)`;
      document.getElementById("auto-clicker-level").textContent = autoClickerLevel;
      document.getElementById("pig-multiplier-upgrade").textContent = `–ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–≤–∏–Ω–µ–π (${pigMultiplierCost.toLocaleString()} pigcoin)`;
      document.getElementById("pig-multiplier-level").textContent = pigMultiplierLevel.toFixed(1) + 'x';
    }

    function updatePlayerNameDisplay() {
      playerNameDisplay.textContent = playerName;
      localStorage.setItem('playerName', playerName);
    }

    function updatePigPerClick() {
      pigPerClickDisplay.textContent = pigPerClick;
      localStorage.setItem('pigPerClick', pigPerClick);
    }

    function updateFarmDisplay() {
      pigCountDisplay.textContent = `–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–∏–Ω–µ–π: ${pigCount.toLocaleString()}`;
      manureCounterDisplay.textContent = `–ù–∞–≤–æ–∑: ${manureCount.toLocaleString()}`;
      localStorage.setItem('pigCount', pigCount);
      localStorage.setItem('manureCount', manureCount);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä
      const progressPercent = ((3600 - timeUntilNextPig) / 3600) * 100;
      document.getElementById('farm-progress').style.width = `${progressPercent}%`;
      
      if (pigCount >= 2 && !farmActive) {
        farmActive = true;
        startFarmTimer();
      }
    }

    function startFarmTimer() {
      pigsToSpawn = Math.floor(Math.random() * 5) + 1;
      updateFarmTimer();
      setInterval(() => {
        manureCount += pigCount;
        updateFarmDisplay();
      }, 5000);
    }

    function updateFarmTimer() {
      if (timeUntilNextPig > 0) {
        timeUntilNextPig--;
        const minutes = Math.floor(timeUntilNextPig / 60);
        const seconds = timeUntilNextPig % 60;
        farmTimerDisplay.textContent = `–û–∂–∏–¥–∞–Ω–∏–µ: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      } else {
        let newPigs = pigsToSpawn;
        if (Math.random() < 0.1) { // 10% —à–∞–Ω—Å –Ω–∞ —É–¥–≤–æ–µ–Ω–∏–µ
          newPigs *= 2;
          showNotification(`üéâ –£–¥–∞—á–∞! –†–æ–¥–∏–ª–æ—Å—å ${newPigs} —Å–≤–∏–Ω–µ–π –≤–º–µ—Å—Ç–æ ${pigsToSpawn}!`);
        }
        
        pigCount += newPigs;
        pigBalance += newPigs * 100 * pigMultiplierLevel;
        updateFarmDisplay();
        updateBalance();
        timeUntilNextPig = 3600;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        checkAchievements();
      }
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    setInterval(() => {
      earnPigCoinFromPigs();
      totalPlayTime++;
      updatePlayTime();
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä —Å–æ–±—ã—Ç–∏–π
      updateEventTimer();
      
      // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç —Å–≤–∏–Ω—å–∏-–∫–æ–ø–∏–ª–∫–∏
      if (hasPiggyBank && totalPlayTime % 3600 === 0) { // –ö–∞–∂–¥—ã–π —á–∞—Å
        const bonus = Math.floor(pigBalance * 0.01);
        pigBalance += bonus;
        updateBalance();
        showNotification(`üê∑ –°–≤–∏–Ω—å—è-–∫–æ–ø–∏–ª–∫–∞: +${bonus.toLocaleString()} pigcoin!`);
      }

      if (totalPlayTime >= 1200 && !johnsonShown) {
        showJohnsonArrival();
      }
    }, 1000);

    function earnPigCoinFromPigs() {
      if (pigCount > 0) {
        let income = pigCount * 100 * pigMultiplierLevel;
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏—è
        if (currentEvent === 'pig_festival') {
          income *= eventMultiplier;
        }
        
        pigBalance += income;
        updateBalance();
        
        if (manureCount > 0) {
          pigBalance -= manureCount;
          updateBalance();
        }
      }
      if (farmActive) {
        updateFarmTimer();
      }
    }

    function handlePigClick(event) {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω
      if (clickCooldown) return;
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫—É–ª–¥–∞—É–Ω
      clickCooldown = true;
      pigEmoji.classList.add('click-cooldown');
      
      setTimeout(() => {
        clickCooldown = false;
        pigEmoji.classList.remove('click-cooldown');
      }, CLICK_COOLDOWN_TIME);
      
      // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
      pigEmoji.classList.add('pig-click-animation');
      setTimeout(() => {
        pigEmoji.classList.remove('pig-click-animation');
      }, 200);
      
      // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –º–æ–Ω–µ—Ç–∫–∏
      const coin = document.createElement('div');
      coin.className = 'coin-animation';
      
      let coinsEarned = pigPerClick;
      
      // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏—è
      if (currentEvent === 'golden_pigs') {
        coinsEarned *= eventMultiplier;
      }
      
      coin.textContent = `+${coinsEarned}`;
      coin.style.left = `${event.clientX - 30}px`;
      coin.style.top = `${event.clientY - 30}px`;
      document.body.appendChild(coin);
      
      setTimeout(() => {
        document.body.removeChild(coin);
      }, 1000);
      
      pigBalance += coinsEarned;
      totalClicks++;
      updateBalance();
      updateTotalClicks();
      
      const randomFact = pigFacts[Math.floor(Math.random() * pigFacts.length)];
      factDisplay.textContent = randomFact;
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      checkAchievements();
    }

    pigEmoji.addEventListener('click', handlePigClick);
    pigEmoji.addEventListener('touchstart', (event) => {
      event.preventDefault();
      handlePigClick(event);
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'event-notification';
      notification.textContent = message;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        if (notification.parentNode) {
          document.body.removeChild(notification);
        }
      }, 3000);
    }

    // –õ–æ—Ç–µ—Ä–µ—è
    document.getElementById("lottery-button").onclick = () => {
      if (pigBalance >= 20000) {
        pigBalance -= 20000;
        updateBalance();

        const randomNum = Math.random();
        let earnedCoins = 0;

        if (randomNum < 0.35) {
          earnedCoins = 5000;
        } else if (randomNum < 0.60) {
          earnedCoins = 10000;
        } else if (randomNum < 0.80) {
          earnedCoins = 25000;
        } else if (randomNum < 0.90) {
          earnedCoins = 50000;
        } else if (randomNum < 0.95) {
          earnedCoins = 150000;
        } else if (randomNum < 0.98) {
          earnedCoins = 1000000;
        } else if (randomNum < 0.985) {
          earnedCoins = 10000000;
        } else {
          alert("–ü–∞–Ω–¥–µ–º–∏—è! –£ –≤–∞—Å —Å–ø–∏—Å–∞–Ω–æ 10 –∫–ª–∏–∫–æ–≤ –∏ 2 —Å–≤–∏–Ω—å–∏.");
          pigPerClick = Math.max(pigPerClick - 10, 0);
          pigCount = Math.max(pigCount - 2, 0);
        }

        pigBalance += earnedCoins;
        updateBalance();
        if (earnedCoins > 0) {
          showNotification(`üé∞ –õ–æ—Ç–µ—Ä–µ—è: –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${earnedCoins.toLocaleString()} pigcoin!`);
        }
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —Å–≤–∏–Ω–æ–π –ª–æ—Ç–µ—Ä–µ–∏!");
      }
    };

    function showJohnsonArrival() {
      if (!johnsonShown) {
        showNotification("‚ö†Ô∏è –ú–∏—Å—Ç–µ—Ä –î–∂–æ–Ω—Å–æ–Ω –≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ —Å–≤–æ—é —Ñ–µ—Ä–º—É!");
        johnsonShown = true;
        localStorage.setItem('johnsonShown', true);
        competitorButtonVisible = true;
        localStorage.setItem('competitorButtonVisible', true);
        competitorButton.style.display = "block";
      }
    }

    competitorButton.onclick = () => {
      johnsonFarmActive = true;
      johnsonTimer = setInterval(updateJohnsonPigCount, 2000);
      showNotification("‚öîÔ∏è –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç: –§–µ—Ä–º–∞ –º–∏—Å—Ç–µ—Ä–∞ –î–∂–æ–Ω—Å–æ–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!");
      checkJohnsonStatus();
    }

    function updateJohnsonPigCount() {
      johnsonPigCount++;
      checkJohnsonStatus();
    }

    function checkJohnsonStatus() {
      if (pigCount > johnsonPigCount) {
        clearInterval(johnsonTimer);
        showNotification("üéâ –î–∂–æ–Ω—Å–æ–Ω –ø–æ–∑–∞–¥–∏! –û—Å—Ç–∞–ª–æ—Å—å –¥–æ–∂–¥–∞—Ç—å—Å—è –≤—Ä—É—á–µ–Ω–∏—è —Å–≤–∏–Ω–Ω–æ–≥–æ –∫—É–±–∫–∞!");
        startJohnsonTimer();
      }
    }

    function startJohnsonTimer() {
      let countdown = 300;
      const timerDisplay = setInterval(() => {
        if (countdown <= 0) {
          clearInterval(timerDisplay);
          johnsonPigCount += 1;
          showNotification("‚ö° –£ –º–∏—Å—Ç–µ—Ä–∞ –î–∂–æ–Ω—Å–æ–Ω–∞ —Ç–µ–ø–µ—Ä—å 1 —Å–≤–∏–Ω—å—è –≤ —Å–µ–∫—É–Ω–¥—É!");
          return;
        }
        countdown--;
      }, 1000);
      
      setInterval(checkVictory, 1000);
    }

    function checkVictory() {
      if (johnsonPigCount - pigCount <= 50) {
        showNotification("üèÜ –ü–û–ë–ï–î–ê! –ú–∏—Å—Ç–µ—Ä –î–∂–æ–Ω—Å–æ–Ω –ø–æ–≤–µ—Ä–∂–µ–Ω! –í—ã –∑–∞—Å–ª—É–∂–∏–ª–∏ —Å–≤–∏–Ω–Ω–æ–π –∫—É–±–æ–∫!");
        johnsonFarmActive = false;
        johnsonPigCount = 15000;
        competitorButton.style.display = "none";
        competitorButtonVisible = false;
        localStorage.setItem('competitorButtonVisible', false);
      }
    }

    // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ç–∞–π–º–µ—Ä
    setInterval(() => {
      updatePlayTime();
      if (totalPlayTime >= 1200 && !johnsonShown) {
        showJohnsonArrival();
      }
    }, 1000);

    // –£–ª—É—á—à–µ–Ω–∏—è
    document.getElementById("click-upgrade").onclick = () => {
      if (pigBalance >= clickUpgradeCost) {
        pigBalance -= clickUpgradeCost;
        pigPerClick += 1;
        updateBalance();
        updatePigPerClick();
        clickUpgradeCost = Math.floor(clickUpgradeCost * 1.5);
        updateUpgradeButton();
        showNotification("üîº –ü—Ä–æ–∫–∞—á–∫–∞ –∫–ª–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∞!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏!");
      }
    };

    document.getElementById("barn-upgrade").onclick = () => {
      if (pigBalance >= barnUpgradeCost) {
        pigBalance -= barnUpgradeCost;
        pigPerClick += 1;
        updateBalance();
        updatePigPerClick();
        barnUpgradeCost += 5000;
        updateUpgradeButton();
        showNotification("üè† –ê–º–±–∞—Ä —É–ª—É—á—à–µ–Ω!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–º–±–∞—Ä–∞!");
      }
    };

    document.getElementById("enhance-territory").onclick = () => {
      if (pigBalance >= territoryUpgradeCost) {
        pigBalance -= territoryUpgradeCost;
        const additionalClicks = Math.floor(Math.random() * 3) + 1;
        pigPerClick += additionalClicks;
        updateBalance();
        updatePigPerClick();
        territoryUpgradeCost += 5000;
        updateUpgradeButton();
        showNotification(`üå≥ –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –æ–±–ª–∞–≥–æ—Ä–æ–∂–µ–Ω—ã! +${additionalClicks} –∫ –∫–ª–∏–∫—É!`);
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –æ–±–ª–∞–≥–æ—Ä–æ–¥–∏–≤–∞–Ω–∏—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏!");
      }
    };

    // –ù–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
    document.getElementById("auto-clicker-upgrade").onclick = () => {
      if (pigBalance >= autoClickerCost) {
        pigBalance -= autoClickerCost;
        autoClickerLevel++;
        updateBalance();
        updateUpgradeButton();
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –µ—Å–ª–∏ –æ–Ω –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω
        if (!autoClickerInterval) {
          autoClickerInterval = setInterval(() => {
            pigBalance += pigPerClick * autoClickerLevel;
            updateBalance();
          }, 5000); // –ö–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        }
        
        showNotification(`ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä —É–ª—É—á—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è ${autoClickerLevel}!`);
        localStorage.setItem('autoClickerLevel', autoClickerLevel);
        localStorage.setItem('autoClickerCost', autoClickerCost);
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞!");
      }
    };

    document.getElementById("pig-multiplier-upgrade").onclick = () => {
      if (pigBalance >= pigMultiplierCost) {
        pigBalance -= pigMultiplierCost;
        pigMultiplierLevel += 0.1; // +10%
        updateBalance();
        updateUpgradeButton();
        pigMultiplierCost = Math.floor(pigMultiplierCost * 1.5);
        showNotification(`üìà –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Å–≤–∏–Ω–µ–π —É–≤–µ–ª–∏—á–µ–Ω –¥–æ ${pigMultiplierLevel.toFixed(1)}x!`);
        localStorage.setItem('pigMultiplierLevel', pigMultiplierLevel);
        localStorage.setItem('pigMultiplierCost', pigMultiplierCost);
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è!");
      }
    };

    document.getElementById("buy-pig-from-farm").onclick = () => {
      if (pigBalance >= 500000) {
        pigBalance -= 500000;
        pigCount += 1;
        updateFarmDisplay();
        updateBalance();
        showNotification(`üê∑ –ö—É–ø–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Å–≤–∏–Ω—å—è! –í—Å–µ–≥–æ: ${pigCount}`);
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Å–≤–∏–Ω—å–∏!");
      }
    };

    document.getElementById("buy-carrot").onclick = () => {
      if (pigBalance >= 50000) {
        pigBalance -= 50000;
        updateBalance();
        
        if (Math.random() < 0.5) {
          timeUntilNextPig = Math.max(120, timeUntilNextPig - 2400); // –£—Å–∫–æ—Ä—è–µ–º –Ω–∞ 40 –º–∏–Ω—É—Ç –∏–ª–∏ –¥–æ 2 –º–∏–Ω—É—Ç
          showNotification("ü•ï –ú–æ—Ä–∫–æ–≤—å —Å—Ä–∞–±–æ—Ç–∞–ª–∞! –¢–∞–π–º–µ—Ä —É—Å–∫–æ—Ä–µ–Ω!");
        } else {
          showNotification("ü•ï –ú–æ—Ä–∫–æ–≤—å –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞... –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!");
        }
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –º–æ—Ä–∫–æ–≤–∏!");
      }
    };

    document.getElementById("clean-manure").onclick = () => {
      manureCount = Math.max(manureCount - 10, 0);
      updateFarmDisplay();
      showNotification("üßπ –ù–∞–≤–æ–∑ –æ—á–∏—â–µ–Ω!");
    };

    document.getElementById("use-shovel").onclick = () => {
      let shovelChoice = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –ª–æ–ø–∞—Ç—ã, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (1, 2 –∏–ª–∏ 3):");
      switch (shovelChoice) {
        case '1':
          if (shovels.shovel1 > 0) {
            manureCount = Math.max(manureCount - 1000, 0);
            shovels.shovel1--;
            updateFarmDisplay();
            showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 1!");
          }
          break;
        case '2':
          if (shovels.shovel2 > 0) {
            manureCount = Math.max(manureCount - 10000, 0);
            shovels.shovel2--;
            updateFarmDisplay();
            showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 2 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 2!");
          }
          break;
        case '3':
          if (shovels.shovel3 > 0) {
            manureCount = Math.max(manureCount - 100000, 0);
            shovels.shovel3--;
            updateFarmDisplay();
            showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 3 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞!");
          } else {
            alert("–£ –≤–∞—Å –Ω–µ—Ç –ª–æ–ø–∞—Ç—ã 3!");
          }
          break;
        default:
          alert("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä –ª–æ–ø–∞—Ç—ã!");
      }
    };

    // –ú–∞–≥–∞–∑–∏–Ω - –Ω–æ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
    document.getElementById("buy-piggy-bank").onclick = () => {
      if (pigBalance >= 25000 && !hasPiggyBank) {
        pigBalance -= 25000;
        hasPiggyBank = true;
        updateBalance();
        localStorage.setItem('hasPiggyBank', true);
        showNotification("üí∞ –°–≤–∏–Ω—å—è-–∫–æ–ø–∏–ª–∫–∞ –∫—É–ø–ª–µ–Ω–∞! +1% –∫ –±–∞–ª–∞–Ω—Å—É –∫–∞–∂–¥—ã–π —á–∞—Å!");
      } else if (hasPiggyBank) {
        alert("–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Å–≤–∏–Ω—å—è-–∫–æ–ø–∏–ª–∫–∞!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Å–≤–∏–Ω—å–∏-–∫–æ–ø–∏–ª–∫–∏!");
      }
    };

    // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
    document.getElementById("shop-button").onclick = () => {
      shopModal.style.display = "block";
      setTimeout(() => {
        shopModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-shop").onclick = () => {
      shopModal.style.opacity = 0;
      setTimeout(() => {
        shopModal.style.display = "none";
      }, 500);
    };

    document.getElementById("buy-shovel1").onclick = () => {
      if (pigBalance >= 10000) {
        pigBalance -= 10000;
        shovels.shovel1++;
        updateBalance();
        localStorage.setItem('shovel1', shovels.shovel1);
        showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 1 –∫—É–ø–ª–µ–Ω–∞!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 1!");
      }
    };

    document.getElementById("buy-shovel2").onclick = () => {
      if (pigBalance >= 100000) {
        pigBalance -= 100000;
        shovels.shovel2++;
        updateBalance();
        localStorage.setItem('shovel2', shovels.shovel2);
        showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 2 –∫—É–ø–ª–µ–Ω–∞!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 2!");
      }
    };

    document.getElementById("buy-shovel3").onclick = () => {
      if (pigBalance >= 500000) {
        pigBalance -= 500000;
        shovels.shovel3++;
        updateBalance();
        localStorage.setItem('shovel3', shovels.shovel3);
        showNotification("ü™ö –õ–æ–ø–∞—Ç–∞ 3 –∫—É–ø–ª–µ–Ω–∞!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ª–æ–ø–∞—Ç—ã 3!");
      }
    };

    // –§–µ—Ä–º–∞ –∫–∞–∫ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    document.getElementById("farm-button").onclick = () => {
      farmModal.style.display = "block";
      setTimeout(() => {
        farmModal.style.opacity = 1;
      }, 10);
      updateFarmDisplay();
    };

    document.getElementById("close-farm").onclick = () => {
      farmModal.style.opacity = 0;
      setTimeout(() => {
        farmModal.style.display = "none";
      }, 500);
    };

    document.getElementById("upgrades-button").onclick = () => {
      upgradesModal.style.display = "block";
      setTimeout(() => {
        upgradesModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-upgrades").onclick = () => {
      upgradesModal.style.opacity = 0;
      setTimeout(() => {
        upgradesModal.style.display = "none";
      }, 500);
    };

    document.getElementById("help-button").onclick = () => {
      helpModal.style.display = "block";
      setTimeout(() => {
        helpModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-help").onclick = () => {
      helpModal.style.opacity = 0;
      setTimeout(() => {
        helpModal.style.display = "none";
      }, 500);
    };

    document.getElementById("close-congrats").onclick = () => {
      congratsModal.style.opacity = 0;
      setTimeout(() => {
        congratsModal.style.display = "none";
      }, 500);
    };

    document.getElementById("manure-help-button").onclick = () => {
      manureHelpModal.style.display = "block";
      setTimeout(() => {
        manureHelpModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-manure-help").onclick = () => {
      manureHelpModal.style.opacity = 0;
      setTimeout(() => {
        manureHelpModal.style.display = "none";
      }, 500);
    };

    // –°–æ–±—ã—Ç–∏—è
    document.getElementById("events-button").onclick = () => {
      updateEventsDisplay();
      eventsModal.style.display = "block";
      setTimeout(() => {
        eventsModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-events").onclick = () => {
      eventsModal.style.opacity = 0;
      setTimeout(() => {
        eventsModal.style.display = "none";
      }, 500);
    };

    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    document.getElementById("achievements-button").onclick = () => {
      updateAchievementsDisplay();
      achievementsModal.style.display = "block";
      setTimeout(() => {
        achievementsModal.style.opacity = 1;
      }, 10);
    };

    document.getElementById("close-achievements").onclick = () => {
      achievementsModal.style.opacity = 0;
      setTimeout(() => {
        achievementsModal.style.display = "none";
      }, 500);
    };

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π
    function updateEventsDisplay() {
      const currentEventDisplay = document.getElementById('current-event');
      const eventTimerDisplay = document.getElementById('event-timer');
      
      if (currentEvent && Date.now() < eventEndTime) {
        let eventName = '';
        switch(currentEvent) {
          case 'pig_festival': eventName = '–°–≤–∏–Ω–æ–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å'; break;
          case 'golden_pigs': eventName = '–ó–æ–ª–æ—Ç—ã–µ —Å–≤–∏–Ω—å–∏'; break;
          default: eventName = '–ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ';
        }
        
        currentEventDisplay.textContent = eventName;
        
        const timeLeft = Math.max(0, Math.floor((eventEndTime - Date.now()) / 1000));
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        eventTimerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
      } else {
        currentEventDisplay.textContent = '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π';
        eventTimerDisplay.textContent = '--:--';
        currentEvent = null;
        eventMultiplier = 1.0;
      }
    }

    function updateEventTimer() {
      if (currentEvent && Date.now() >= eventEndTime) {
        showNotification(`‚è∞ –°–æ–±—ã—Ç–∏–µ "${getEventName(currentEvent)}" –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å!`);
        currentEvent = null;
        eventMultiplier = 1.0;
        updateEventsDisplay();
      }
    }

    function getEventName(eventType) {
      switch(eventType) {
        case 'pig_festival': return '–°–≤–∏–Ω–æ–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å';
        case 'golden_pigs': return '–ó–æ–ª–æ—Ç—ã–µ —Å–≤–∏–Ω—å–∏';
        default: return '–°–æ–±—ã—Ç–∏–µ';
      }
    }

    // –ü–æ–∫—É–ø–∫–∞ —Å–æ–±—ã—Ç–∏–π
    document.getElementById("buy-event-boost").onclick = () => {
      if (pigBalance >= 5000 && currentEvent) {
        pigBalance -= 5000;
        updateBalance();
        eventEndTime += 10 * 60 * 1000; // +10 –º–∏–Ω—É—Ç
        showNotification("‚è∞ –°–æ–±—ã—Ç–∏–µ —É—Å–∫–æ—Ä–µ–Ω–æ –Ω–∞ 10 –º–∏–Ω—É—Ç!");
        updateEventsDisplay();
      } else if (!currentEvent) {
        alert("–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è!");
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è!");
      }
    };

    document.getElementById("start-pig-festival").onclick = () => {
      if (pigBalance >= 25000) {
        pigBalance -= 25000;
        updateBalance();
        currentEvent = 'pig_festival';
        eventMultiplier = 1.5; // +50%
        eventEndTime = Date.now() + 30 * 60 * 1000; // 30 –º–∏–Ω—É—Ç
        showNotification("üé™ –°–≤–∏–Ω–æ–π —Ñ–µ—Å—Ç–∏–≤–∞–ª—å –Ω–∞—á–∞–ª—Å—è! –î–æ—Ö–æ–¥ +50% –Ω–∞ 30 –º–∏–Ω—É—Ç!");
        updateEventsDisplay();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è!");
      }
    };

    document.getElementById("start-golden-pigs").onclick = () => {
      if (pigBalance >= 100000) {
        pigBalance -= 100000;
        updateBalance();
        currentEvent = 'golden_pigs';
        eventMultiplier = 3.0; // x3
        eventEndTime = Date.now() + 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç
        showNotification("üåü –ó–æ–ª–æ—Ç—ã–µ —Å–≤–∏–Ω—å–∏! –ö–ª–∏–∫–∏ –¥–∞—é—Ç x3 pigcoin –Ω–∞ 5 –º–∏–Ω—É—Ç!");
        updateEventsDisplay();
      } else {
        alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pigcoin –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–æ–ª–æ—Ç—ã—Ö —Å–≤–∏–Ω–µ–π!");
      }
    };

    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    function checkAchievements() {
      // –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫
      if (totalClicks >= 1 && !achievements.firstClick) {
        achievements.firstClick = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: –ü–µ—Ä–≤—ã–π –∫–ª–∏–∫!");
      }
      
      // 1000 pigcoin
      if (pigBalance >= 1000 && !achievements.thousandCoins) {
        achievements.thousandCoins = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 1000 pigcoin!");
      }
      
      // 10000 pigcoin
      if (pigBalance >= 10000 && !achievements.tenThousandCoins) {
        achievements.tenThousandCoins = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 10000 pigcoin!");
      }
      
      // 10 —Å–≤–∏–Ω–µ–π
      if (pigCount >= 10 && !achievements.tenPigs) {
        achievements.tenPigs = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 10 —Å–≤–∏–Ω–µ–π!");
      }
      
      // 100 –∫–ª–∏–∫–æ–≤
      if (totalClicks >= 100 && !achievements.hundredClicks) {
        achievements.hundredClicks = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 100 –∫–ª–∏–∫–æ–≤!");
      }
      
      // 1000 –∫–ª–∏–∫–æ–≤
      if (totalClicks >= 1000 && !achievements.thousandClicks) {
        achievements.thousandClicks = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 1000 –∫–ª–∏–∫–æ–≤!");
      }
      
      // 1 —á–∞—Å –∏–≥—Ä—ã
      if (totalPlayTime >= 3600 && !achievements.oneHourPlay) {
        achievements.oneHourPlay = true;
        showNotification("üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: 1 —á–∞—Å –∏–≥—Ä—ã!");
      }
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
      saveAchievements();
      updateAchievementsDisplay();
    }

    function updateAchievementsDisplay() {
      const achievementsCompleted = document.getElementById('achievements-completed');
      let completedCount = 0;
      
      const achievementElements = {
        'achievement-1': achievements.firstClick,
        'achievement-2': achievements.thousandCoins,
        'achievement-3': achievements.tenThousandCoins,
        'achievement-4': achievements.tenPigs,
        'achievement-5': achievements.hundredClicks,
        'achievement-6': achievements.thousandClicks,
        'achievement-7': achievements.oneHourPlay
      };
      
      for (const [id, completed] of Object.entries(achievementElements)) {
        const element = document.getElementById(id);
        if (element) {
          const statusElement = element.querySelector('.achievement-status');
          if (statusElement) {
            if (completed) {
              statusElement.textContent = '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ';
              statusElement.style.color = 'green';
              completedCount++;
            } else {
              statusElement.textContent = '‚ùå –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ';
              statusElement.style.color = 'red';
            }
          }
        }
      }
      
      achievementsCompleted.textContent = completedCount;
    }

    function saveAchievements() {
      localStorage.setItem('achievementFirstClick', achievements.firstClick);
      localStorage.setItem('achievementThousandCoins', achievements.thousandCoins);
      localStorage.setItem('achievementTenThousandCoins', achievements.tenThousandCoins);
      localStorage.setItem('achievementTenPigs', achievements.tenPigs);
      localStorage.setItem('achievementHundredClicks', achievements.hundredClicks);
      localStorage.setItem('achievementThousandClicks', achievements.thousandClicks);
      localStorage.setItem('achievementOneHourPlay', achievements.oneHourPlay);
    }

    // –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ò–ú–ï–ù–ò –ò –¶–í–ï–¢–ê
    
    // –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏
    document.getElementById("change-name-button").onclick = () => {
      document.getElementById("new-player-name").value = playerName;
      changeNameModal.style.display = "block";
      setTimeout(() => {
        changeNameModal.style.opacity = 1;
      }, 10);
    };
    
    // –ö–Ω–æ–ø–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞
    document.getElementById("change-color-button").onclick = () => {
      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã
      document.querySelectorAll('.color-option').forEach(option => {
        option.classList.remove('selected');
        if (option.dataset.theme === currentTheme) {
          option.classList.add('selected');
        }
      });
      
      changeColorModal.style.display = "block";
      setTimeout(() => {
        changeColorModal.style.opacity = 1;
      }, 10);
    };
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏
    document.getElementById("save-name-button").onclick = () => {
      const newName = document.getElementById("new-player-name").value.trim();
      if (newName) {
        playerName = newName;
        updatePlayerNameDisplay();
        showNotification(`üë§ –ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ "${playerName}"!`);
      }
      changeNameModal.style.opacity = 0;
      setTimeout(() => {
        changeNameModal.style.display = "none";
      }, 500);
    };
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–º–µ–Ω–∏
    document.getElementById("close-name-modal").onclick = () => {
      changeNameModal.style.opacity = 0;
      setTimeout(() => {
        changeNameModal.style.display = "none";
      }, 500);
    };
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ü–≤–µ—Ç–∞
    document.getElementById("close-color-modal").onclick = () => {
      changeColorModal.style.opacity = 0;
      setTimeout(() => {
        changeColorModal.style.display = "none";
      }, 500);
    };
    
    // –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã
    document.querySelectorAll('.color-option').forEach(option => {
      option.addEventListener('click', () => {
        const theme = option.dataset.theme;
        applyTheme(theme);
        currentTheme = theme;
        localStorage.setItem('currentTheme', theme);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã
        document.querySelectorAll('.color-option').forEach(opt => {
          opt.classList.remove('selected');
        });
        option.classList.add('selected');
        
        showNotification(`üé® –¶–≤–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞!`);
      });
    });
    
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã
    function applyTheme(themeName) {
      const theme = colorThemes[themeName];
      
      if (!theme) return;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      document.documentElement.style.setProperty('--primary-color', theme.primary);
      document.documentElement.style.setProperty('--secondary-color', theme.secondary);
      document.documentElement.style.setProperty('--dark-color', theme.dark);
      document.documentElement.style.setProperty('--light-color', theme.light);
      document.documentElement.style.setProperty('--button-shadow', theme.shadow);
    }

    window.onload = () => {
      updatePlayerNameDisplay();
      updateFarmDisplay();
      updatePigPerClick();
      updatePlayTime();
      updateTotalClicks();
      updateAchievementsDisplay();
      updateEventsDisplay();

      pigBalance = localStorage.getItem('pigBalance') ? parseInt(localStorage.getItem('pigBalance')) : 0;
      pigCount = localStorage.getItem('pigCount') ? parseInt(localStorage.getItem('pigCount')) : 0;
      totalPlayTime = localStorage.getItem('totalPlayTime') ? parseInt(localStorage.getItem('totalPlayTime')) : 0;
      totalClicks = localStorage.getItem('totalClicks') ? parseInt(localStorage.getItem('totalClicks')) : 0;
      johnsonPigCount = localStorage.getItem('johnsonPigCount') ? parseInt(localStorage.getItem('johnsonPigCount')) : 15000;
      johnsonShown = localStorage.getItem('johnsonShown') ? JSON.parse(localStorage.getItem('johnsonShown')) : false;
      competitorButtonVisible = localStorage.getItem('competitorButtonVisible') ? JSON.parse(localStorage.getItem('competitorButtonVisible')) : false;

      if (competitorButtonVisible) {
        competitorButton.style.display = "block";
      }

      clickUpgradeCost = localStorage.getItem('clickUpgradeCost') ? parseInt(localStorage.getItem('clickUpgradeCost')) : 100;
      barnUpgradeCost = localStorage.getItem('barnUpgradeCost') ? parseInt(localStorage.getItem('barnUpgradeCost')) : 5000;
      territoryUpgradeCost = localStorage.getItem('territoryUpgradeCost') ? parseInt(localStorage.getItem('territoryUpgradeCost')) : 5000;
      manureCount = localStorage.getItem('manureCount') ? parseInt(localStorage.getItem('manureCount')) : 0;
      
      autoClickerLevel = localStorage.getItem('autoClickerLevel') ? parseInt(localStorage.getItem('autoClickerLevel')) : 0;
      autoClickerCost = localStorage.getItem('autoClickerCost') ? parseInt(localStorage.getItem('autoClickerCost')) : 10000;
      pigMultiplierLevel = localStorage.getItem('pigMultiplierLevel') ? parseFloat(localStorage.getItem('pigMultiplierLevel')) : 1.0;
      pigMultiplierCost = localStorage.getItem('pigMultiplierCost') ? parseInt(localStorage.getItem('pigMultiplierCost')) : 50000;
      hasPiggyBank = localStorage.getItem('hasPiggyBank') ? JSON.parse(localStorage.getItem('hasPiggyBank')) : false;
      
      currentEvent = localStorage.getItem('currentEvent') || null;
      eventEndTime = localStorage.getItem('eventEndTime') ? parseInt(localStorage.getItem('eventEndTime')) : 0;
      eventMultiplier = localStorage.getItem('eventMultiplier') ? parseFloat(localStorage.getItem('eventMultiplier')) : 1.0;

      // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –µ—Å–ª–∏ –æ–Ω –±—ã–ª –∫—É–ø–ª–µ–Ω
      if (autoClickerLevel > 0) {
        autoClickerInterval = setInterval(() => {
          pigBalance += pigPerClick * autoClickerLevel;
          updateBalance();
        }, 5000);
      }

      updatePlayTime();
      updateBalance();
      updateUpgradeButton();
      
      // –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–≤–∏–Ω–∫–∏ –¥–ª—è –¥–µ–∫–æ—Ä–∞
      createGrassBlades();
    };

    function createGrassBlades() {
      const grassDecoration = document.querySelector('.grass-decoration');
      if (!grassDecoration) return;
      
      for (let i = 0; i < 30; i++) {
        const blade = document.createElement('div');
        blade.className = 'grass-blade';
        blade.style.left = `${Math.random() * 100}%`;
        blade.style.height = `${15 + Math.random() * 25}px`;
        grassDecoration.appendChild(blade);
      }
    }

    window.onbeforeunload = () => {
      localStorage.setItem('pigBalance', pigBalance);
      localStorage.setItem('pigCount', pigCount);
      localStorage.setItem('pigPerClick', pigPerClick);
      localStorage.setItem('timeUntilNextPig', timeUntilNextPig);
      localStorage.setItem('playerName', playerName);
      localStorage.setItem('clickUpgradeCost', clickUpgradeCost);
      localStorage.setItem('barnUpgradeCost', barnUpgradeCost);
      localStorage.setItem('territoryUpgradeCost', territoryUpgradeCost);
      localStorage.setItem('manureCount', manureCount);
      localStorage.setItem('shovel1', shovels.shovel1);
      localStorage.setItem('shovel2', shovels.shovel2);
      localStorage.setItem('shovel3', shovels.shovel3);
      localStorage.setItem('totalPlayTime', totalPlayTime);
      localStorage.setItem('totalClicks', totalClicks);
      localStorage.setItem('johnsonPigCount', johnsonPigCount);
      localStorage.setItem('johnsonShown', johnsonShown);
      localStorage.setItem('competitorButtonVisible', competitorButtonVisible);
      localStorage.setItem('currentTheme', currentTheme);
      
      localStorage.setItem('autoClickerLevel', autoClickerLevel);
      localStorage.setItem('autoClickerCost', autoClickerCost);
      localStorage.setItem('pigMultiplierLevel', pigMultiplierLevel);
      localStorage.setItem('pigMultiplierCost', pigMultiplierCost);
      localStorage.setItem('hasPiggyBank', hasPiggyBank);
      
      localStorage.setItem('currentEvent', currentEvent);
      localStorage.setItem('eventEndTime', eventEndTime);
      localStorage.setItem('eventMultiplier', eventMultiplier);
      
      saveAchievements();
    };

    function showCongratsModal() {
      congratsModal.style.display = "block";
      setTimeout(() => {
        congratsModal.style.opacity = 1;
      }, 10);
    }
  </script>
</body>
</html>
